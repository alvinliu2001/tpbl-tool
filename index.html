<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <!-- Title -->
    <title>TPBL | ç¤¾ç¾¤æ–‡æ¡ˆç”Ÿæˆå·¥å…·</title>
    <meta name="description" content="TPBL è·ç±ƒè¯ç›Ÿç¤¾ç¾¤æ–‡æ¡ˆè‡ªå‹•ç”Ÿæˆèˆ‡ç®¡ç†å·¥å…·">
    
    <!-- Favicon -->
    <link rel="icon" href="https://tpbl.basketball/favicon.png">
    <!-- Apple Touch Icon -->
    <link rel="apple-touch-icon" href="https://raw.githubusercontent.com/alvinliu2001/tpbl-tool/refs/heads/main/apple-touch-icon.png">
    
    <!-- Font Awesome Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Noto Sans TC', sans-serif; -webkit-tap-highlight-color: transparent; }
        
        /* Sidebar Styles */
        .sidebar-item.active { background-color: #D8BF98; color: #19191A; font-weight: 700; }
        .sidebar-item:hover { color: #ffffff !important; }

        /* Scrollbar Hiding */
        ::-webkit-scrollbar { display: none; }
        * { -ms-overflow-style: none; scrollbar-width: none; }
        
        /* Custom Colors */
        .text-brand-gold { color: #D8BF98; }
        .bg-brand-dark { background-color: #19191A; }
        .bg-brand-gold { background-color: #D8BF98; }
        .border-brand-gold { border-color: #D8BF98; }
        .focus-ring-gold:focus { --tw-ring-color: #D8BF98; }

        /* Disabled Input Style */
        .disabled-input { background-color: #f3f4f6; cursor: not-allowed; color: #9ca3af; }
        input[readonly] { background-color: #f3f4f6; color: #4b5563; }

        /* Custom Select */
        select {
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none;
            background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e");
            background-position: right 0.5rem center;
            background-repeat: no-repeat;
            background-size: 1.5em 1.5em;
            padding-right: 2.5rem !important;
        }

        /* Date Input Fixes */
        input[type="date"] {
            -webkit-appearance: none;
            appearance: none;
            background-color: white;
            padding-top: 0.5rem;
            padding-bottom: 0.5rem;
            font-family: 'Noto Sans TC', sans-serif;
            display: block;
            text-align: left;
        }
        /* Mobile-only min-height for touch targets */
        @media (max-width: 768px) {
            input[type="date"] {
                min-height: 2.75rem;
            }
        }
        /* Fix for iOS date alignment */
        input[type="date"]::-webkit-date-and-time-value { text-align: left; }

        /* Animations */
        .fade-out {
            opacity: 0;
            transition: opacity 0.5s ease-out;
            pointer-events: none;
        }
        .fade-in {
            animation: fadeIn 0.5s ease-in forwards;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        brand: {
                            dark: '#19191A',
                            gold: '#D8BF98',
                        }
                    }
                }
            }
        }
    </script>
</head>
<body class="bg-gray-50 text-gray-800 h-screen overflow-hidden">

    <!-- LANDING PAGE -->
    <div id="landing-page" class="fixed inset-0 z-50 bg-brand-dark flex flex-col md:flex-row overflow-hidden">
        
        <!-- Left Side: Content -->
        <div class="w-full md:w-1/2 h-full flex flex-col justify-center px-8 md:px-24 relative z-10 bg-brand-dark overflow-y-auto">
            
            <div class="flex-1 flex flex-col justify-center min-h-[400px]">
                <!-- Logo -->
                <div class="mb-6 flex justify-start">
                    <img src="https://raw.githubusercontent.com/alvinliu2001/tpbl-tool/refs/heads/main/tpbl-logo-white.png" alt="TPBL Logo" class="h-10 md:h-12 w-auto">
                </div>
                
                <!-- Title -->
                <h1 class="text-3xl md:text-4xl font-bold text-white mb-3 tracking-wide text-left">ç¤¾ç¾¤æ–‡æ¡ˆç”Ÿæˆå·¥å…·</h1>
                <p class="text-gray-400 text-lg md:text-xl mb-10 font-light text-left">ä¸€å€‹ç°¡å–®å¯¦ç”¨çš„å·¥å…·ï¼Œå¹«åŠ©åœ˜éšŠé«˜æ•ˆç”¢å‡ºæ–‡æ¡ˆã€‚</p>
                
                <!-- Button -->
                <div class="flex justify-start">
                    <button onclick="enterApp()" class="bg-brand-gold text-brand-dark text-lg font-bold py-3 px-12 rounded-full hover:bg-white hover:scale-105 transition-all duration-300 shadow-lg flex items-center gap-2">
                        é–‹å§‹ä½¿ç”¨ <span>â†’</span>
                    </button>
                </div>
            </div>

            <!-- Footer -->
            <div class="py-6 w-full flex flex-col items-center justify-center text-gray-600 text-xs md:text-sm flex-shrink-0">
                <p>powered by Alvin LIU</p>
                <p class="mt-1">Â© TPBL 2025 All rights reserved.</p>
            </div>
        </div>

        <!-- Right Side: Image -->
        <div class="hidden md:block w-1/2 h-full relative">
             <img src="https://assets.tpbl.basketball/production/banners/kl3My9saHVdhrTmoezJC3Am9KyBrMzgES3lVQYm2.jpg?20250930145249" alt="TPBL Season Visual" class="w-full h-full object-cover opacity-90">
            <div class="absolute inset-0 bg-black/10"></div>
        </div>
    </div>

    <!-- MAIN APP -->
    <div id="app-container" class="hidden w-full h-full flex flex-col md:flex-row overflow-hidden fixed inset-0 z-0">
        <!-- Sidebar -->
        <aside class="w-full md:w-64 bg-brand-dark text-gray-400 flex flex-col flex-shrink-0 md:h-full z-50 relative shadow-lg md:shadow-none">
            <div class="p-4 md:p-6 border-b border-gray-800 flex justify-between items-center bg-brand-dark z-50 relative">
                <div class="flex items-center gap-3">
                    <div id="logo-container" onclick="location.reload()" class="cursor-pointer" title="è¿”å›é¦–é ">
                        <img src="https://raw.githubusercontent.com/alvinliu2001/tpbl-tool/refs/heads/main/tpbl-logo-white.png" alt="TPBL Logo" class="h-6 md:h-7 w-auto">
                    </div>
                </div>
                
                <!-- Mobile Menu Button -->
                <button onclick="toggleSidebar()" class="md:hidden bg-white text-black rounded-full w-8 h-8 flex items-center justify-center focus:outline-none hover:bg-gray-100 transition shadow-sm z-50">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M4 9h16M4 15h16" />
                    </svg>
                </button>
            </div>
            
            <!-- Sidebar Nav -->
            <nav id="sidebar-nav" class="flex flex-col flex-1 py-4 space-y-1 bg-brand-dark absolute md:static w-full top-full left-0 shadow-xl md:shadow-none transition-all duration-500 ease-in-out z-40 origin-top max-h-0 opacity-0 overflow-hidden md:max-h-full md:opacity-100 md:overflow-y-auto">
                <div class="px-4 py-2 text-xs font-bold text-gray-600 uppercase tracking-wider">è³½å‰é ç†±</div>
                <button onclick="switchMode('weekday_preview')" id="btn-weekday_preview" class="sidebar-item w-full text-left px-6 py-3 hover:bg-gray-800 transition flex items-center gap-3"><i class="fa-solid fa-calendar-day w-6 text-center"></i> å¹³æ—¥è³½äº‹é å‘Š</button>
                <button onclick="switchMode('game_preview')" id="btn-game_preview" class="sidebar-item w-full text-left px-6 py-3 hover:bg-gray-800 transition flex items-center gap-3"><i class="fa-solid fa-fire w-6 text-center"></i> å–®å ´è³½ç¨‹é å‘Š</button>
                <button onclick="switchMode('weekly_schedule')" id="btn-weekly_schedule" class="sidebar-item w-full text-left px-6 py-3 hover:bg-gray-800 transition flex items-center gap-3"><i class="fa-solid fa-calendar-week w-6 text-center"></i> æ¯é€±è³½ç¨‹è¡¨</button>
                <button onclick="switchMode('matchup_highlight')" id="btn-matchup_highlight" class="sidebar-item w-full text-left px-6 py-3 hover:bg-gray-800 transition flex items-center gap-3"><i class="fa-solid fa-bullseye w-6 text-center"></i> è³½å‰å°æˆ°äº®é»</button>

                <div class="px-4 py-2 mt-4 text-xs font-bold text-gray-600 uppercase tracking-wider">è³½äº‹é€²è¡Œ / è³½å¾Œ</div>
                <button onclick="switchMode('final_score')" id="btn-final_score" class="sidebar-item w-full text-left px-6 py-3 hover:bg-gray-800 transition flex items-center gap-3"><i class="fa-solid fa-flag-checkered w-6 text-center"></i> çµ‚å ´æ¯”åˆ†</button>
                <button onclick="switchMode('game_highlight')" id="btn-game_highlight" class="sidebar-item w-full text-left px-6 py-3 hover:bg-gray-800 transition flex items-center gap-3"><i class="fa-solid fa-film w-6 text-center"></i> æœ¬å ´è³½äº‹ç²¾è¯</button>
                <button onclick="switchMode('press_conf')" id="btn-press_conf" class="sidebar-item w-full text-left px-6 py-3 hover:bg-gray-800 transition flex items-center gap-3"><i class="fa-solid fa-microphone w-6 text-center"></i> è³½å¾Œè¨˜è€…æœƒ</button>
                <button onclick="switchMode('potg')" id="btn-potg" class="sidebar-item w-full text-left px-6 py-3 hover:bg-gray-800 transition flex items-center gap-3"><i class="fa-solid fa-bolt w-6 text-center"></i> å–®å ´æœ€ä½³çƒå“¡</button>
                <button onclick="switchMode('local_player_highlight')" id="btn-local_player_highlight" class="sidebar-item w-full text-left px-6 py-3 hover:bg-gray-800 transition flex items-center gap-3"><i class="fa-solid fa-star w-6 text-center"></i> æœ¬åœŸçƒå“¡å–®å ´å‚‘å‡ºè¡¨ç¾</button>
                <button onclick="switchMode('career_milestone')" id="btn-career_milestone" class="sidebar-item w-full text-left px-6 py-3 hover:bg-gray-800 transition flex items-center gap-3"><i class="fa-solid fa-crown w-6 text-center"></i> çƒå“¡ç”Ÿæ¶¯ç´€éŒ„</button>

                <div class="px-4 py-2 mt-4 text-xs font-bold text-gray-600 uppercase tracking-wider">æ¯é€±ç¸½çµ</div>
                <button onclick="switchMode('weekly_standings')" id="btn-weekly_standings" class="sidebar-item w-full text-left px-6 py-3 hover:bg-gray-800 transition flex items-center gap-3"><i class="fa-solid fa-list-ol w-6 text-center"></i> æ¯é€±æˆ°ç¸¾æ’è¡Œ</button>
                <button onclick="switchMode('top5')" id="btn-top5" class="sidebar-item w-full text-left px-6 py-3 hover:bg-gray-800 transition flex items-center gap-3"><i class="fa-solid fa-video w-6 text-center"></i> æœ¬é€±äº”å¤§å¥½çƒ</button>
                <button onclick="switchMode('potw')" id="btn-potw" class="sidebar-item w-full text-left px-6 py-3 hover:bg-gray-800 transition flex items-center gap-3"><i class="fa-solid fa-trophy w-6 text-center"></i> å–®é€±æœ€ä½³çƒå“¡</button>
                <button onclick="switchMode('weekly_local_eff')" id="btn-weekly_local_eff" class="sidebar-item w-full text-left px-6 py-3 hover:bg-gray-800 transition flex items-center gap-3"><i class="fa-solid fa-chart-line w-6 text-center"></i> æ¯é€±æœ¬åœŸæ•ˆç‡å€¼æ’è¡Œ</button>

                <div class="px-4 py-2 mt-4 text-xs font-bold text-gray-600 uppercase tracking-wider">å°ˆé¡Œ / å…¶ä»–</div>
                <button onclick="switchMode('monthly_kicks')" id="btn-monthly_kicks" class="sidebar-item w-full text-left px-6 py-3 hover:bg-gray-800 transition flex items-center gap-3"><i class="fa-solid fa-shoe-prints w-6 text-center"></i> æ¯æœˆç²¾é¸å¯¦æˆ°çƒé‹</button>
                <button onclick="switchMode('season_stats')" id="btn-season_stats" class="sidebar-item w-full text-left px-6 py-3 hover:bg-gray-800 transition flex items-center gap-3"><i class="fa-solid fa-chart-simple w-6 text-center"></i> æ•¸æ“šç´¯è¨ˆæ’è¡Œ</button>
            </nav>
        </aside>

        <!-- Main Content -->
        <main class="flex-1 flex flex-col md:flex-row relative overflow-y-auto md:overflow-hidden w-full h-full">
            
            <!-- Input Area -->
            <div class="flex-1 p-4 md:p-8 bg-white md:h-full md:overflow-y-auto" id="input-container">
                <div class="max-w-2xl mx-auto pb-10 md:pb-0">
                    <h2 id="current-title" class="text-xl md:text-2xl font-bold mb-6 text-gray-800 border-l-4 border-brand-gold pl-4 flex items-center gap-3">
                        <span id="title-text">è«‹é¸æ“‡åŠŸèƒ½</span>
                        <a id="example-link" href="#" target="_blank" class="text-gray-400 hover:text-brand-gold transition hidden" title="æŸ¥çœ‹ç¯„ä¾‹è²¼æ–‡">
                            â†—ï¸
                        </a>
                    </h2>
                    
                    <div id="dynamic-form" class="space-y-5">
                        <p class="text-gray-500">è«‹å¾å·¦å´é¸å–®é¸æ“‡æ‚¨è¦ç”Ÿæˆçš„è²¼æ–‡é¡å‹ã€‚</p>
                    </div>

                    <div class="mt-8 pt-6 border-t border-gray-100">
                        <button onclick="generateCopy()" class="w-full bg-brand-dark hover:bg-brand-gold hover:text-brand-dark text-white font-bold py-4 px-6 rounded-lg transition duration-200 flex justify-center items-center gap-2 shadow-lg">
                            <span>ç”Ÿæˆæ–‡æ¡ˆ</span>
                        </button>
                    </div>
                </div>
            </div>

            <!-- Output Area -->
            <div class="w-full md:w-1/3 bg-gray-100 p-6 flex flex-col border-t md:border-t-0 md:border-l border-gray-200">
                <h3 class="text-lg font-bold mb-4 text-gray-700 flex items-center gap-2">
                    é è¦½çµæœ
                </h3>
                <textarea id="output-text" class="flex-1 w-full p-4 border border-gray-300 rounded-lg text-sm resize-none focus:outline-none focus:ring-2 focus:ring-brand-gold focus:border-brand-gold bg-white leading-relaxed h-64 md:h-auto" placeholder="æ–‡æ¡ˆå°‡é¡¯ç¤ºæ–¼æ­¤..."></textarea>
                
                <button onclick="copyToClipboard()" class="mt-4 w-full bg-white border-2 border-gray-200 hover:border-brand-dark text-gray-800 font-bold py-3 px-4 rounded-lg transition duration-200 flex justify-center items-center gap-2">
                    <span id="copy-text">ä¸€éµè¤‡è£½</span>
                </button>

                <!-- Footer in Main App -->
                <div class="mt-6 text-center text-gray-400 text-xs">
                    <p>powered by Alvin LIU</p>
                    <p class="mt-1">Â© TPBL 2025 All rights reserved.</p>
                </div>
            </div>

        </main>
    </div>

    <!-- JavaScript Logic -->
    <script>
        // --- Enter App from Landing Page ---
        function enterApp() {
            const landing = document.getElementById('landing-page');
            const app = document.getElementById('app-container');
            landing.classList.add('fade-out');
            setTimeout(() => {
                landing.style.display = 'none';
                app.classList.remove('hidden');
                app.classList.add('fade-in');
                window.scrollTo(0, 0);
            }, 500);
        }

        // --- Mobile Sidebar Toggle with Animation Logic ---
        function toggleSidebar() {
            const nav = document.getElementById('sidebar-nav');
            const availableHeight = window.innerHeight - 70;
            
            if (nav.classList.contains('max-h-0')) {
                nav.classList.remove('max-h-0', 'opacity-0', 'overflow-hidden');
                nav.style.maxHeight = availableHeight + 'px';
                nav.classList.add('opacity-100', 'overflow-y-auto');
            } else {
                nav.style.maxHeight = '0px'; 
                nav.classList.add('max-h-0', 'opacity-0', 'overflow-hidden');
                nav.classList.remove('opacity-100', 'overflow-y-auto');
            }
        }
        
        window.addEventListener('resize', () => {
            if (window.innerWidth >= 768) {
                const nav = document.getElementById('sidebar-nav');
                nav.style.maxHeight = '';
                nav.classList.add('max-h-0', 'opacity-0', 'overflow-hidden');
                nav.classList.remove('opacity-100', 'overflow-y-auto');
            }
        });

        // --- Data & Config ---
        const TEAMS = {
            "æˆ°ç¥": { full: "è‡ºåŒ—å°æ–°æˆ°ç¥", emoji: "ğŸ›¡ï¸", arena: "å’Œå¹³ç±ƒçƒé¤¨" },
            "æ”»åŸç…": { full: "æ–°ç«¹å¾¡åµ¿æ”»åŸç…", emoji: "ğŸ¦", arena: "æ–°ç«¹ç¸£ç«‹é«”è‚²é¤¨" },
            "ç‰¹æ”»": { full: "æ–°åŒ—ä¸­ä¿¡ç‰¹æ”»", emoji: "âš¡ï¸", arena: "æ–°èŠé«”è‚²é¤¨" },
            "åœ‹ç‹": { full: "æ–°åŒ—åœ‹ç‹", emoji: "ğŸ‘‘", arena: "æ–°èŠé«”è‚²é¤¨" },
            "å¤¢æƒ³å®¶": { full: "ç¦çˆ¾æ‘©æ²™å¤¢æƒ³å®¶", emoji: "ğŸ¦„", arena: "æ´²éš›è¿·ä½ è›‹" },
            "æµ·ç¥": { full: "é«˜é›„å…¨å®¶æµ·ç¥", emoji: "ğŸ”±", arena: "é«˜é›„å·¨è›‹" },
            "é›²è±¹": { full: "å°å•¤æ°¸è±é›²è±¹", emoji: "ğŸ†", arena: "æ¡ƒåœ’å·¨è›‹" }
        };
        const TEAM_KEYS = Object.keys(TEAMS);
        
        // Roster Data
        const ROSTERS = {
            "æ”»åŸç…": [
                {num: "0", name: "ææ¼¢æ˜‡"}, {num: "2", name: "å¾·é­¯"}, {num: "3", name: "å…‹é›·æ ¼"}, {num: "4", name: "é«˜åœ‹è±ª"},
                {num: "7", name: "æ›¾æŸå–»"}, {num: "8", name: "æœ±é›²è±ª"}, {num: "9", name: "ç”°æµ©"}, {num: "10", name: "åŠ‰ä¸å‹³"},
                {num: "11", name: "è•­é †è­°"}, {num: "12", name: "æå®¶ç‘"}, {num: "17", name: "è”¡å®¸ç¶±"}, {num: "18", name: "å¸•å¡ç…"},
                {num: "22", name: "æå‚‘"}, {num: "25", name: "æ¢ç€š"}, {num: "42", name: "ç›§å† è»’"}, {num: "75", name: "æå•“ç‘‹"}
            ],
            "å¤¢æƒ³å®¶": [
                {num: "0", name: "é™³æŒ¯å‚‘"}, {num: "2", name: "é¦¬å»ºè±ª"}, {num: "3", name: "å¼µå®—æ†²"}, {num: "9", name: "å³å®¶é§¿"},
                {num: "11", name: "æ—ä¿Šå‰"}, {num: "20", name: "ç°¡å‰å„’"}, {num: "23", name: "æ©å°¼æ–¯"}, {num: "24", name: "å¿»æ²ƒå…‹"},
                {num: "26", name: "æå¾·å¨"}, {num: "27", name: "å²æ‰¿å¹³"}, {num: "28", name: "ç›§å† è‰¯"}, {num: "33", name: "æ¹¯æ™®é‡‘æ–¯"},
                {num: "34", name: "é«˜æŸé§"}, {num: "35", name: "éœçˆ¾æ›¼"}, {num: "41", name: "è”£æ·¯å®‰"}, {num: "88", name: "å‘¨æŸè‡£"}
            ],
            "é›²è±¹": [
                {num: "5", name: "é«˜éŒ¦ç‘‹"}, {num: "6", name: "å¾å®ç‘‹"}, {num: "7", name: "éº¥å¡æ´›"}, {num: "8", name: "æ±ªå“²å®‡"},
                {num: "10", name: "ä¸å† çš“"}, {num: "11", name: "èŠåšå…ƒ"}, {num: "12", name: "æ—ä¿¡å¯¬"}, {num: "13", name: "ç±³å‹’"},
                {num: "21", name: "ç‹çš“å‰"}, {num: "24", name: "å…‹ç¾…é¦¬"}, {num: "27", name: "é»ƒé®"}, {num: "31", name: "è‘£æ°¸å…¨"},
                {num: "33", name: "è¿ªäºæ´›"}, {num: "57", name: "æ›¹è–°è¥„"}, {num: "82", name: "åŠ‰å…ƒå‡±"}
            ],
            "æµ·ç¥": [
                {num: "0", name: "é­è¨å“²"}, {num: "2", name: "è©¹å§†æ–¯"}, {num: "6", name: "æ­ææ–¯"}, {num: "7", name: "äºç…¥äº"},
                {num: "10", name: "èƒ¡ç“è²¿"}, {num: "11", name: "æ–½æ™‰å ¯"}, {num: "21", name: "å‘‚å¨éœ†"}, {num: "22", name: "å´”ç¶­æ–¯"},
                {num: "24", name: "è˜‡æ–‡å„’"}, {num: "28", name: "ä½™ç´”å®‰"}, {num: "30", name: "å»–å‰çš“"}, {num: "32", name: "å¸ƒé‡ŒèŒ²å…‹"},
                {num: "57", name: "å³æ›‰è¬¹"}, {num: "66", name: "é™³æ‡·å®‰"}, {num: "85", name: "å‹¤æ˜æ…¶"}, {num: "92", name: "å‡±å¸"}
            ],
            "ç‰¹æ”»": [
                {num: "0", name: "é˜¿å·´è¥¿"}, {num: "1", name: "æç¿éº’"}, {num: "3", name: "æ—å®‰é¾"}, {num: "5", name: "ä½™ç¶­è±ª"},
                {num: "7", name: "é­å˜‰è±ª"}, {num: "10", name: "è¬äºè»’"}, {num: "11", name: "å…§é¦¬"}, {num: "12", name: "æ—ä»»é´»"},
                {num: "14", name: "æ›¾ä¿¡æ­¦"}, {num: "16", name: "æ—éŸ‹ç¿°"}, {num: "18", name: "é£›å…‹"}, {num: "19", name: "é¦¬å¯"},
                {num: "22", name: "é»ƒæ³“ç€š"}, {num: "24", name: "ç°¡å»·å…†"}, {num: "28", name: "éœ¸å¤«"}, {num: "76", name: "æ›¾æ–‡é¼"},
                {num: "77", name: "ææ²›æ¾„"}
            ],
            "åœ‹ç‹": [
                {num: "1", name: "æ—æ›¸ç·¯"}, {num: "2", name: "è˜‡åŸ¹å‡±"}, {num: "5", name: "å‚‘ç™»"}, {num: "8", name: "é¾ç†ç¿”"},
                {num: "9", name: "ææ„·è«º"}, {num: "10", name: "ç°¡ç¥å“²"}, {num: "11", name: "ç‹æŸæ™º"}, {num: "12", name: "æ—å½¥å»·"},
                {num: "13", name: "å‘‚æ”¿å„’"}, {num: "16", name: "å°šè¿ª"}, {num: "17", name: "è˜‡å£«è»’"}, {num: "19", name: "æ—é‡‘æ¦œ"},
                {num: "20", name: "ç†Šç¥¥æ³°"}, {num: "24", name: "æ´ªå¿—å–„"}, {num: "25", name: "å¥§å¸"}, {num: "26", name: "å–¬ç´æ£®"},
                {num: "31", name: "æ¡‘å°¼"}, {num: "42", name: "æ²ƒè¨±æœ¬"}
            ],
            "æˆ°ç¥": [
                {num: "1", name: "æ´›å¤«é “"}, {num: "3", name: "ä¸è–å„’"}, {num: "5", name: "é­èŠƒç¦¾"}, {num: "6", name: "æ±Ÿå‡"},
                {num: "7", name: "åŠ‰å½¥å»·"}, {num: "8", name: "é™³æ–‡å®"}, {num: "9", name: "å¼µå…†è¾°"}, {num: "10", name: "åŸºå¾·"},
                {num: "11", name: "é»ƒè°ç¿°"}, {num: "15", name: "è¬éŠ˜é§¿"}, {num: "20", name: "å­«æ€å ¯"}, {num: "21", name: "å¨åŠ›æ–¯"},
                {num: "23", name: "éŒ¢è‚¯å°¼"}, {num: "29", name: "å¼µè€•æ·¯"}, {num: "32", name: "é½Šæ›¼åŠ "}, {num: "33", name: "é›·è’™æ©"},
                {num: "41", name: "è˜‡å¥•æ™‰"}, {num: "62", name: "é™³å† å…¨"}
            ]
        };

        const GAME_TIMES = ["14:30", "17:00", "19:00"];
        const MONTHS = ["JAN.", "FEB.", "MAR.", "APR.", "MAY", "JUN.", "JUL.", "AUG.", "SEP.", "OCT.", "NOV.", "DEC."];
        const FIXED_VOTE_LINK = "https://tpbl.basketball/awards/vote";
        
        const STAT_TYPES = [
            { label: "å¾—åˆ†", val: "pts" },
            { label: "ç±ƒæ¿", val: "reb" },
            { label: "åŠ©æ”»", val: "ast" },
            { label: "æŠ„æˆª", val: "stl" },
            { label: "é˜»æ”»", val: "blk" },
            { label: "æ•ˆç‡å€¼", val: "eff" },
            { label: "ä¸‰åˆ†å‘½ä¸­", val: "3pm" },
            { label: "æŠ•ç±ƒå‘½ä¸­", val: "fgm" },
            { label: "ç½°çƒå‘½ä¸­", val: "ftm" },
            { label: "è‡ªè¨‚", val: "custom" }
        ];

        const EXAMPLE_LINKS = {
            'weekday_preview': 'https://www.instagram.com/p/DRwnLJKE8xe/',
            'game_preview': 'https://www.instagram.com/p/DRyT5DxkwTu/',
            'weekly_schedule': 'https://www.instagram.com/p/DRwerjvk4_a/',
            'matchup_highlight': 'https://www.instagram.com/p/DRzE52rE295/',
            'final_score': 'https://www.instagram.com/p/DRzaZvYk56J/',
            'game_highlight': 'https://www.instagram.com/p/DRzWV4qk57E/',
            'press_conf': 'https://www.instagram.com/p/DRUOjZNE5sd/',
            'potg': 'https://www.instagram.com/p/DRzc17tkwbe/',
            'local_player_highlight': 'https://www.instagram.com/p/DRUHtOqk5td/',
            'career_milestone': 'https://www.instagram.com/p/DQ1NLvekzh9/',
            'weekly_standings': 'https://www.instagram.com/p/DRbmrrbkzPV/',
            'top5': 'https://www.instagram.com/p/DRgW-5Zk7FE/',
            'potw': 'https://www.instagram.com/p/DReOCyEk6JJ/',
            'weekly_local_eff': 'https://www.instagram.com/p/DRwY7KAk3yy/',
            'monthly_kicks': 'https://www.instagram.com/p/DRoMizOk3t5/',
            'season_stats': 'https://www.instagram.com/p/DRjEhUdEz81/'
        };

        const COMMON_TAGS = "#TPBL #NothingButLove #ç±ƒçƒæ€èƒ½ä¸æ„›";
        const BROADCAST_INFO = "ğŸ‘‰ğŸ»è½‰æ’­å¹³å° ğŸ“º ç·¯ä¾†é›»è¦–ç¶²ï½œåšæ–¯é‹å‹•äºŒå°ï½œTPBLå®˜æ–¹YOUTUBE";

        let currentMode = '';

        // --- Utils ---
        const toMathBoldSerif = (text) => {
            const map = {
                '0': 'ğŸ', '1': 'ğŸ', '2': 'ğŸ', '3': 'ğŸ‘', '4': 'ğŸ’', '5': 'ğŸ“', '6': 'ğŸ”', '7': 'ğŸ•', '8': 'ğŸ–', '9': 'ğŸ—',
                'A': 'ğ€', 'B': 'ğ', 'C': 'ğ‚', 'D': 'ğƒ', 'E': 'ğ„', 'F': 'ğ…', 'G': 'ğ†', 'H': 'ğ‡', 'I': 'ğˆ', 'J': 'ğ‰',
                'K': 'ğŠ', 'L': 'ğ‹', 'M': 'ğŒ', 'N': 'ğ', 'O': 'ğ', 'P': 'ğ', 'Q': 'ğ', 'R': 'ğ‘', 'S': 'ğ’', 'T': 'ğ“',
                'U': 'ğ”', 'V': 'ğ•', 'W': 'ğ–', 'X': 'ğ—', 'Y': 'ğ˜', 'Z': 'ğ™',
                'a': 'ğš', 'b': 'ğ›', 'c': 'ğœ', 'd': 'ğ', 'e': 'ğ', 'f': 'ğŸ', 'g': 'ğ ', 'h': 'ğ¡', 'i': 'ğ¢', 'j': 'ğ£',
                'k': 'ğ¤', 'l': 'ğ¥', 'm': 'ğ¦', 'n': 'ğ§', 'o': 'ğ¨', 'p': 'ğ©', 'q': 'ğª', 'r': 'ğ«', 's': 'ğ¬', 't': 'ğ­',
                'u': 'ğ®', 'v': 'ğ¯', 'w': 'ğ°', 'x': 'ğ±', 'y': 'ğ²', 'z': 'ğ³'
            };
            return String(text).split('').map(char => map[char] || char).join('');
        };

        const parseDateLocal = (dateStr) => {
            if (!dateStr) return new Date();
            const parts = dateStr.split('-');
            return new Date(parts[0], parts[1] - 1, parts[2]);
        };

        const getDayName = (dateStr) => {
            const date = parseDateLocal(dateStr);
            const days = ['SUN', 'MON', 'TUE', 'WED', 'THU', 'FRI', 'SAT'];
            return days[date.getDay()]; 
        };
        
        const getDayChi = (dateStr) => {
            const date = parseDateLocal(dateStr);
            const days = ['æ—¥', 'ä¸€', 'äºŒ', 'ä¸‰', 'å››', 'äº”', 'å…­'];
            return days[date.getDay()];
        };

        const formatMonthDay = (dateStr) => {
            const date = parseDateLocal(dateStr);
            const months = ["JAN", "FEB", "MAR", "APR", "MAY", "JUN", "JUL", "AUG", "SEP", "OCT", "NOV", "DEC"];
            return `${months[date.getMonth()]}.${String(date.getDate()).padStart(2, '0')}`;
        };

        const formatMMDD = (dateStr) => {
             const date = parseDateLocal(dateStr);
             return `${String(date.getMonth()+1).padStart(2,'0')}.${String(date.getDate()).padStart(2,'0')}`;
        };
        
        const formatDateFull = (dateStr) => {
             const date = parseDateLocal(dateStr);
             return `${date.getFullYear()}/${String(date.getMonth()+1).padStart(2,'0')}/${String(date.getDate()).padStart(2,'0')}`;
        }

        // --- UI Builders ---
        const createInput = (id, label, type="text", placeholder="", value="") => `
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-1">${label}</label>
                <input type="${type}" id="${id}" class="w-full p-2.5 border border-gray-300 rounded-md focus:ring-2 focus:ring-brand-gold focus:border-brand-gold" placeholder="${placeholder}" value="${value}">
            </div>
        `;

        const createSelect = (id, label, options) => `
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-1">${label}</label>
                <select id="${id}" class="w-full p-2.5 border border-gray-300 rounded-md bg-white focus:ring-2 focus:ring-brand-gold focus:border-brand-gold">
                    ${options.map(opt => `<option value="${opt}">${opt}</option>`).join('')}
                </select>
            </div>
        `;
        
        const createTeamSelect = (id, label) => `
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-1">${label}</label>
                <select id="${id}" class="w-full p-2.5 border border-gray-300 rounded-md bg-white focus:ring-2 focus:ring-brand-gold focus:border-brand-gold team-select">
                    <option value="" disabled selected>é¸æ“‡çƒéšŠ</option>
                    ${TEAM_KEYS.map(k => `<option value="${k}">${k}</option>`).join('')}
                </select>
            </div>
        `;

        const createPlayerSelect = (id, label, teamSelectId, numInputId="") => `
             <div>
                <label class="block text-sm font-medium text-gray-700 mb-1">${label}</label>
                <select id="${id}" data-team-select="${teamSelectId}" ${numInputId ? `data-num-input="${numInputId}"` : ''} class="w-full p-2.5 border border-gray-300 rounded-md bg-white focus:ring-2 focus:ring-brand-gold focus:border-brand-gold player-select disabled-input" disabled>
                    <option value="">å…ˆé¸æ“‡çƒéšŠ...</option>
                </select>
            </div>
        `;

        const createTimeSelect = (id, label, defaultValue="19:00") => `
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-1">${label}</label>
                <select id="${id}" class="w-full p-2.5 border border-gray-300 rounded-md bg-white focus:ring-2 focus:ring-brand-gold focus:border-brand-gold">
                    ${GAME_TIMES.map(t => `<option value="${t}" ${t === defaultValue ? 'selected' : ''}>${t}</option>`).join('')}
                </select>
            </div>
        `;

        const createTextarea = (id, label, placeholder="", rows=4, value="") => `
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-1">${label}</label>
                <textarea id="${id}" rows="${rows}" class="w-full p-2.5 border border-gray-300 rounded-md focus:ring-2 focus:ring-brand-gold focus:border-brand-gold" placeholder="${placeholder}">${value}</textarea>
            </div>
        `;
        
        const createNextGameBlock = (title) => `
            <div class="bg-gray-50 p-4 rounded-lg border border-gray-200 mt-4">
                <p class="text-xs font-bold text-gray-500 mb-2 uppercase">${title}</p>
                <div class="grid grid-cols-2 gap-4">
                    ${createInput('next_date', 'æ—¥æœŸ', 'date')}
                    ${createInput('next_game_num', 'å ´æ¬¡ (Game)', 'number')}
                    ${createTimeSelect('next_time', 'æ™‚é–“', '19:00')}
                    <div></div>
                    ${createTeamSelect('next_away', 'å®¢éšŠ (Away)')}
                    ${createTeamSelect('next_home', 'ä¸»éšŠ (Home)')}
                </div>
            </div>
        `;

        // --- Switch Mode Logic ---
        function switchMode(mode) {
            currentMode = mode;
            document.querySelectorAll('.sidebar-item').forEach(el => el.classList.remove('active'));
            document.getElementById(`btn-${mode}`).classList.add('active');
            
            if (window.innerWidth < 768) {
                const nav = document.getElementById('sidebar-nav');
                nav.style.maxHeight = '0px';
                nav.classList.add('max-h-0', 'opacity-0', 'overflow-hidden');
                nav.classList.remove('opacity-100', 'overflow-y-auto');
            }

            const titles = {
                'weekday_preview': 'å¹³æ—¥è³½äº‹é å‘Š',
                'game_preview': 'å–®å ´è³½ç¨‹é å‘Š',
                'weekly_schedule': 'æ¯é€±è³½ç¨‹è¡¨',
                'matchup_highlight': 'è³½å‰å°æˆ°äº®é»',
                'final_score': 'çµ‚å ´æ¯”åˆ†',
                'game_highlight': 'æœ¬å ´è³½äº‹ç²¾è¯',
                'press_conf': 'è³½å¾Œè¨˜è€…æœƒç²¾è¯',
                'potg': 'å–®å ´æœ€ä½³çƒå“¡',
                'local_player_highlight': 'æœ¬åœŸçƒå“¡å–®å ´å‚‘å‡ºè¡¨ç¾',
                'career_milestone': 'çƒå“¡ç”Ÿæ¶¯ç´€éŒ„',
                'weekly_standings': 'æ¯é€±æˆ°ç¸¾æ’è¡Œ',
                'top5': 'æœ¬é€±äº”å¤§å¥½çƒ',
                'potw': 'å–®é€±æœ€ä½³çƒå“¡',
                'weekly_local_eff': 'æ¯é€±æœ¬åœŸæ•ˆç‡å€¼æ’è¡Œ',
                'monthly_kicks': 'æ¯æœˆç²¾é¸å¯¦æˆ°çƒé‹',
                'season_stats': 'æ•¸æ“šç´¯è¨ˆæ’è¡Œ'
            };
            
            // Update Title Text
            document.getElementById('title-text').innerText = titles[mode];
            
            // Update Link
            const linkBtn = document.getElementById('example-link');
            const url = EXAMPLE_LINKS[mode];
            if (url) {
                linkBtn.href = url;
                linkBtn.classList.remove('hidden');
            } else {
                linkBtn.classList.add('hidden');
            }

            renderForm(mode);
            // Re-bind listeners for dynamic dropdowns
            bindDynamicEvents();
        }

        function renderForm(mode) {
            const container = document.getElementById('dynamic-form');
            let html = '';
            const today = new Date().toISOString().split('T')[0];

            if (mode === 'game_preview') {
                html += `
                    <div class="grid grid-cols-2 gap-4">
                        ${createInput('game_num', 'å ´æ¬¡ (GAME)', 'number', '32', '32')}
                        ${createInput('match_date', 'æ¯”è³½æ—¥æœŸ', 'date', '', today)}
                        ${createTimeSelect('match_time', 'æ¯”è³½æ™‚é–“', '19:00')}
                        <div></div>
                        ${createTeamSelect('away_team', 'å®¢éšŠ (Away)')}
                        ${createTeamSelect('home_team', 'ä¸»éšŠ (Home)')}
                    </div>
                    ${createTextarea('highlight_text', 'è§€è³½äº®é»', 'è¼¸å…¥æœ¬å ´çœ‹é»æ–‡æ¡ˆ...', 6)}
                    ${createInput('yt_link', 'YouTube è½‰æ’­é€£çµ', 'text')}
                `;
            } else if (mode === 'weekday_preview') {
                html += `
                     <div class="grid grid-cols-2 gap-4">
                        ${createInput('match_date', 'æ¯”è³½æ—¥æœŸ', 'date', '', today)}
                        ${createTimeSelect('match_time', 'æ¯”è³½æ™‚é–“', '19:00')}
                        ${createTeamSelect('away_team', 'å®¢éšŠ (Away)')}
                        ${createTeamSelect('home_team', 'ä¸»éšŠ (Home)')}
                    </div>
                    ${createInput('promo_title', 'é å‘Šæ¨™é¡Œ (å¦‚ï¼šWEDNESDAY NIGHT...)', 'text', 'WEDNESDAY NIGHT, LETâ€™S GOOOO')}
                    ${createTextarea('promo_text', 'é å‘Šæ–‡æ¡ˆ', 'æœ¬å­£é¦–æ¬¡äº¤æ‰‹çš„...', 4)}
                    ${createTextarea('promo_link', 'è´ŠåŠ©å•†ç‰ˆä½ (å¯æ›è¡Œ)', 'ğŸ“SPORTS NATIONSåº—é»è³‡è¨Š...', 3)}
                `;
            } else if (mode === 'matchup_highlight') {
                html += `
                    <div class="p-3 border rounded-md bg-gray-50 mb-3">
                        <p class="text-sm font-bold text-gray-700 mb-2">å°æˆ°çµ„åˆ</p>
                        <div class="grid grid-cols-12 gap-2 items-center">
                            <div class="col-span-4">
                                ${createTeamSelect('mu_home_team', 'ä¸»éšŠ')}
                            </div>
                            <div class="col-span-8">
                                ${createPlayerSelect('mu_home_player', 'ä¸»éšŠçƒå“¡', 'mu_home_team')}
                            </div>
                            
                            <div class="col-span-12 text-center text-gray-400 text-xs font-bold my-1">VS</div>
                            
                            <div class="col-span-4">
                                ${createTeamSelect('mu_away_team', 'å®¢éšŠ')}
                            </div>
                            <div class="col-span-8">
                                ${createPlayerSelect('mu_away_player', 'å®¢éšŠçƒå“¡', 'mu_away_team')}
                            </div>
                        </div>
                    </div>
                    ${createTextarea('matchup_content', 'å°æˆ°åˆ†æ/äº®é»æ–‡æ¡ˆ', '', 6)}
                    ${createNextGameBlock("ä»Šæ—¥æ¯”è³½è³‡è¨Š (Today's Game)")}
                `;
            } else if (mode === 'final_score') {
                html += `
                    ${createInput('game_num', 'å ´æ¬¡ (GAME)', 'number', '31')}
                    ${createInput('match_title', 'æ¨™é¡Œ (ä¾‹å¦‚ï¼šå…¨éšŠã€Œè±¹ã€é€²13è¨˜å¤–ç·š...)', 'text')}
                    ${createTextarea('match_recap', 'æ¯”è³½å›é¡§æ–‡æ¡ˆ', '', 6)}
                    <div class="bg-gray-50 p-4 rounded-lg border border-gray-200 mt-4">
                        <p class="text-xs font-bold text-gray-500 mb-2 uppercase">ä¸‹å ´è³½äº‹è³‡è¨Š (Next Game)</p>
                        <div class="grid grid-cols-2 gap-4">
                            ${createInput('next_date', 'æ—¥æœŸ', 'date', '', today)}
                            ${createTimeSelect('next_time', 'æ™‚é–“', '19:00')}
                            ${createTeamSelect('next_away', 'å®¢éšŠ (Away)')}
                            ${createTeamSelect('next_home', 'ä¸»éšŠ (Home)')}
                        </div>
                    </div>
                `;
            } else if (mode === 'game_highlight') {
                // UPDATED: Auto prefix + No YT link
                html += `
                    ${createInput('hl_title', 'ç²¾è¯æ¨™é¡Œ (ä¸éœ€è¼¸å…¥é–‹é ­ç¬¦è™Ÿ)', 'text', 'æˆ°ç¥é™ªä½ æå‰éè–èª•ï¼Merry ChristMARS ğŸ„')}
                `;
            } else if (mode === 'press_conf') {
                html += `
                    ${createInput('pc_title', 'æ¨™é¡Œ (è‹±æ–‡/ä¸­æ–‡)', 'text', 'ğŸ—£ï¸ FACING THE STORM...')}
                    ${createTextarea('pc_quote', 'èªéŒ„ (ä¸éœ€è¦æ‰“å¼•è™Ÿ)', '', 3)}
                    ${createTextarea('pc_content', 'å…§å®¹', '', 6)}
                    ${createNextGameBlock("ä¸‹å ´è³½äº‹è³‡è¨Š (Next Game)")}
                `;
            } else if (mode === 'potg') {
                html += `
                    <div class="grid grid-cols-2 gap-4 mb-4">
                        ${createTeamSelect('potg_away', 'å®¢éšŠ (Away)')}
                        ${createTeamSelect('potg_home', 'ä¸»éšŠ (Home)')}
                    </div>
                    ${createNextGameBlock("ä¸‹å ´è³½äº‹è³‡è¨Š (Next Game)")}
                    ${createInput('promo_text', 'åº•éƒ¨æ´»å‹•æ–‡æ¡ˆ', 'text', 'ğŸ€„æ‹šç«¶æŠ€ï¼Œè¶…å¸¶å‹...')}
                `;
            } else if (mode === 'local_player_highlight') {
                 html += `
                    <div class="mb-4 p-3 bg-gray-50 border rounded-md">
                         <p class="text-sm font-bold text-gray-700 mb-2">é¸æ“‡çƒå“¡ (è‡ªå‹•å¸¶å…¥èƒŒè™Ÿ)</p>
                         <div class="grid grid-cols-12 gap-2">
                             <div class="col-span-4">${createTeamSelect('lp_team', 'çƒéšŠ')}</div>
                             <div class="col-span-5">${createPlayerSelect('lp_name', 'çƒå“¡', 'lp_team', 'lp_num')}</div>
                             <div class="col-span-3">
                                <label class="block text-sm font-medium text-gray-700 mb-1">èƒŒè™Ÿ</label>
                                <input type="text" id="lp_num" readonly class="w-full p-2.5 border border-gray-300 rounded-md text-center bg-gray-100">
                             </div>
                         </div>
                         ${createInput('lp_title', 'æ¨™é¡Œ (ä¾‹å¦‚ï¼šğŸ¦æ›¾æŸå–»å…¨é¢æ§è¡›è¦–é‡...)', 'text')}
                    </div>
                    ${createTextarea('lp_content', 'çƒå“¡è¡¨ç¾æè¿°', '', 4)}
                    <div class="bg-gray-50 p-4 rounded-lg border border-gray-200 mt-4">
                        <p class="text-xs font-bold text-gray-500 mb-2 uppercase">ä¸‹å ´è³½äº‹è³‡è¨Š (Next Game)</p>
                        <div class="mb-2">
                             ${createInput('lp_next_player_name', 'ä¸‹å ´çƒå“¡åç¨± (ä¾‹å¦‚ï¼šæ›¾æŸå–»)', 'text')}
                        </div>
                        <div class="grid grid-cols-2 gap-4">
                            ${createInput('next_date', 'æ—¥æœŸ', 'date', '', today)}
                            ${createInput('next_game_num', 'å ´æ¬¡ (Game)', 'number')}
                            ${createTimeSelect('next_time', 'æ™‚é–“', '19:00')}
                            <div></div>
                            ${createTeamSelect('next_away', 'å®¢éšŠ (Away)')}
                            ${createTeamSelect('next_home', 'ä¸»éšŠ (Home)')}
                        </div>
                    </div>
                `;
            } else if (mode === 'career_milestone') {
                html += `
                    ${createInput('ms_title', 'ç´€éŒ„æ¨™é¡Œ (ä¾‹å¦‚ï¼šé˜²ç·šä¸Šçš„ç›œçƒé«˜æ‰‹ï¼Œç™¾æŠ„é”æˆï¼ğŸ‘Œ)', 'text')}
                    
                    <div class="p-3 bg-gray-50 border rounded-md mb-4">
                        <p class="text-sm font-bold text-gray-700 mb-2">é”æˆçƒå“¡</p>
                        <div class="grid grid-cols-12 gap-2">
                            <div class="col-span-4">${createTeamSelect('ms_team', 'çƒéšŠ')}</div>
                            <div class="col-span-5">${createPlayerSelect('ms_name', 'çƒå“¡', 'ms_team', 'ms_num')}</div>
                            <div class="col-span-3">
                                <label class="block text-sm font-medium text-gray-700 mb-1">èƒŒè™Ÿ</label>
                                <input type="text" id="ms_num" readonly class="w-full p-2.5 border border-gray-300 rounded-md text-center bg-gray-100">
                            </div>
                        </div>
                        <div class="mt-2">
                            ${createInput('ms_eng_name', 'è‹±æ–‡å (é¸å¡«)', 'text', 'Lasannah Kromah')}
                        </div>
                    </div>

                    ${createInput('ms_achievement', 'é”æˆæˆå°± (ä¾‹å¦‚ï¼šæ­£å¼æˆç‚º TPBL é¦–ä½é”æˆ100æ¬¡æŠ„æˆªçš„ç”·äººğŸ”¥)', 'text')}
                    ${createTextarea('ms_content', 'å…§å®¹æè¿°', '', 5)}
                `;
            } else if (mode === 'weekly_schedule') {
                html += `
                    ${createInput('week_num', 'ç¬¬å¹¾é€± (Week)', 'number', '8')}
                    ${createTextarea('week_intro', 'æœ¬é€±è³½ç¨‹å¼•è¨€', '', 4)}
                    <div class="bg-gray-50 p-4 rounded-lg border border-gray-200">
                        <p class="text-sm font-bold mb-2">æœ¬é€±è³½ç¨‹åˆ—è¡¨</p>
                        <div id="schedule_list_container" class="space-y-3"></div>
                        <button onclick="addScheduleItem()" class="mt-2 text-sm font-bold text-brand-gold hover:text-yellow-600">+ æ–°å¢å ´æ¬¡</button>
                    </div>
                `;
                setTimeout(() => { addScheduleItem(); addScheduleItem(); }, 100);
            } else if (mode === 'weekly_standings') {
                html += `
                    ${createInput('week_num', 'ç¬¬å¹¾é€± (Week)', 'number', '7')}
                    ${createTextarea('standings_content', 'æˆ°ç¸¾åˆ†ææ–‡æ¡ˆ', '', 8)}
                    <div class="bg-gray-50 p-4 rounded-lg border border-gray-200 mt-4">
                        <p class="text-sm font-bold mb-2">æœ¬é€±è³½ç¨‹åˆ—è¡¨</p>
                        <div id="standings_schedule_list_container" class="space-y-3"></div>
                        <button onclick="addStandingsGameItem()" class="mt-2 text-sm font-bold text-brand-gold hover:text-yellow-600">+ æ–°å¢é å‘Šå ´æ¬¡</button>
                    </div>
                `;
                 setTimeout(() => { addStandingsGameItem(); }, 100);
            } else if (mode === 'top5') {
                 // MODIFIED: Use Team/Player selects with autofill
                 html += `
                    ${createInput('week_num', 'ç¬¬å¹¾é€± (Week)', 'number', '7')}
                    ${createTextarea('top5_intro', 'å¼•è¨€æ–‡æ¡ˆ', '', 3)}
                    <div class="space-y-3 mt-4">
                        <p class="text-sm font-bold text-gray-500">äº”å¤§å¥½çƒæ’è¡Œ</p>
                        ${[1,2,3,4,5].map(i => `
                            <div class="p-3 border rounded-md bg-gray-50">
                                <span class="font-bold text-gray-700 block mb-1">ç¬¬ ${i} å</span>
                                <div class="grid grid-cols-3 gap-2">
                                    ${createTeamSelect(`top${i}_team`, '')}
                                    ${createPlayerSelect(`top${i}_name`, '', `top${i}_team`, `top${i}_num`)}
                                    <input id="top${i}_num" type="text" readonly placeholder="èƒŒè™Ÿ" class="w-full p-2.5 border border-gray-300 rounded-md text-sm text-center bg-gray-100">
                                </div>
                            </div>
                        `).join('')}
                    </div>
                    ${createInput('vote_link', 'æŠ•ç¥¨é€£çµ', 'text')}
                `;
            } else if (mode === 'potw') {
                html += `
                    <div class="grid grid-cols-2 gap-4">
                        ${createTeamSelect('player_team', 'æ‰€å±¬éšŠä¼')}
                        <div>
                             <label class="block text-sm font-medium text-gray-700 mb-1">çƒå“¡</label>
                             <select id="player_name_select" data-team-select="player_team" class="w-full p-2.5 border border-gray-300 rounded-md bg-white focus:ring-2 focus:ring-brand-gold focus:border-brand-gold player-select disabled-input" disabled>
                                <option>å…ˆé¸æ“‡çƒéšŠ</option>
                             </select>
                             <input type="hidden" id="player_num_dummy">
                             <p class="text-xs text-gray-400 mt-1">*è«‹æ‰‹å‹•è£œä¸Šè‹±æ–‡å</p>
                        </div>
                    </div>
                    
                    <div class="bg-gray-50 p-4 rounded-lg border border-gray-200 mt-2">
                        <p class="text-sm font-bold mb-2">æœ¬é€±æ•¸æ“š (STATS)</p>
                        <div id="stats_list_container" class="space-y-2"></div>
                        <button onclick="addStatItem()" class="mt-2 text-sm font-bold text-brand-gold hover:text-yellow-600">+ æ–°å¢æ•¸æ“š</button>
                    </div>
                    
                    ${createTextarea('player_desc', 'çƒå“¡è¡¨ç¾æè¿°', '', 6)}
                    ${createNextGameBlock("ä¸‹å ´è³½äº‹è³‡è¨Š (Next Game)")}
                `;
                setTimeout(() => { addStatItem(); addStatItem(); addStatItem(); }, 100);
            } else if (mode === 'weekly_local_eff') {
                html += `
                    ${createInput('week_num', 'ç¬¬å¹¾é€± (Week)', 'number', '7')}
                    ${createTextarea('eff_intro', 'å¼•è¨€æ–‡æ¡ˆ', '', 3)}
                    <div class="space-y-3 mt-4">
                         <p class="text-sm font-bold text-gray-500">æœ¬åœŸæ•ˆç‡å€¼æ’è¡Œ</p>
                         ${[1,2,3,4,5].map(i => `
                            <div class="p-3 border rounded-md bg-gray-50">
                                <div class="grid grid-cols-12 gap-2 mb-2 items-center">
                                    <div class="col-span-1 flex items-center justify-center font-bold text-gray-500">#${i}</div>
                                    <div class="col-span-4">
                                        ${createTeamSelect(`eff${i}_team`, '')}
                                    </div>
                                    <div class="col-span-2">
                                        <input id="eff${i}_num" type="text" readonly placeholder="#" class="w-full p-2.5 border border-gray-300 rounded-md text-sm text-center bg-gray-100">
                                    </div>
                                    <div class="col-span-3">
                                        ${createPlayerSelect(`eff${i}_name`, '', `eff${i}_team`, `eff${i}_num`)}
                                    </div>
                                    <div class="col-span-2"><input id="eff${i}_val" type="text" placeholder="EFF" class="w-full p-2.5 border border-gray-300 rounded-md text-sm focus:ring-2 focus:ring-brand-gold focus:border-brand-gold"></div>
                                </div>
                                <textarea id="eff${i}_desc" rows="2" class="w-full p-2.5 border border-gray-300 rounded-md text-sm focus:ring-2 focus:ring-brand-gold focus:border-brand-gold" placeholder="çƒå“¡è¡¨ç¾æè¿°..."></textarea>
                            </div>
                         `).join('')}
                    </div>
                `;
            } else if (mode === 'monthly_kicks') {
                html += `
                    ${createSelect('kicks_month', 'æœˆä»½', MONTHS)}
                    ${createTextarea('kicks_intro', 'å¼•è¨€æ–‡æ¡ˆ', '', 4)}
                `;
            } else if (mode === 'season_stats') {
                // MODIFIED: Season Stats simplified
                html += `
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">æ¨™é¡Œå¾Œç¶´</label>
                        <select id="stats_title_suffix" class="w-full p-2.5 border border-gray-300 rounded-md bg-white focus:ring-2 focus:ring-brand-gold">
                            <option value="TEAM">TEAM</option>
                            <option value="PLAYER">PLAYER</option>
                        </select>
                    </div>
                    ${createTextarea('stats_content', 'æ•¸æ“šåˆ†ææ–‡æ¡ˆ', '', 8)}
                    
                    <div class="bg-gray-50 p-4 rounded-lg border border-gray-200 mt-4">
                        <p class="text-xs font-bold text-gray-500 mb-2 uppercase">çµ±è¨ˆå€é–“</p>
                        <div class="mb-3">
                             ${createInput('stats_cutoff_date', 'çµ±è¨ˆæˆªæ­¢æ—¥', 'date', '', today)}
                        </div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">åŒ…å«è³½å­£</label>
                        <div class="flex gap-4 items-center">
                            <label class="flex items-center gap-2"><input type="checkbox" id="season_2425" checked class="w-4 h-4 text-brand-gold focus:ring-brand-gold border-gray-300 rounded"> 24-25è³½å­£</label>
                            <label class="flex items-center gap-2"><input type="checkbox" id="season_2526" class="w-4 h-4 text-brand-gold focus:ring-brand-gold border-gray-300 rounded"> 25-26è³½å­£</label>
                        </div>
                    </div>
                    
                    <div class="mt-4 bg-gray-50 p-4 rounded-lg border border-gray-200">
                        <p class="text-xs font-bold text-gray-500 mb-2 uppercase">æŠ•ç¥¨è³‡è¨Š</p>
                        ${createInput('stats_vote_month', 'æŠ•ç¥¨æœˆä»½/å€é–“ (ä¾‹å¦‚ï¼š10-11)', 'text', '10-11')}
                    </div>
                `;
            }

            container.innerHTML = html;
        }

        // --- Form Interaction Logic ---
        function attachFormListeners() {
            // Listen for changes on team selects
            document.querySelectorAll('.team-select').forEach(select => {
                select.addEventListener('change', function() {
                    const teamName = this.value;
                    const playerSelects = document.querySelectorAll(`.player-select[data-team-select="${this.id}"]`);
                    
                    playerSelects.forEach(pSelect => {
                        // Reset
                        pSelect.innerHTML = '<option value="">è«‹é¸æ“‡çƒå“¡</option>';
                        pSelect.disabled = true;
                        pSelect.classList.add('disabled-input');
                        pSelect.value = "";
                        
                        // Also clear linked number input if exists
                        const numInputId = pSelect.dataset.numInput;
                        if(numInputId) {
                            const numInput = document.getElementById(numInputId);
                            if(numInput) numInput.value = "";
                        }

                        // Populate
                        if (teamName && ROSTERS[teamName]) {
                            pSelect.disabled = false;
                            pSelect.classList.remove('disabled-input');
                            ROSTERS[teamName].forEach(player => {
                                const option = document.createElement('option');
                                option.value = player.name;
                                option.text = player.name; // Just name in dropdown
                                option.dataset.num = player.num;
                                pSelect.appendChild(option);
                            });
                        }
                    });
                });
            });

            // Listen for changes on player selects (Auto-fill Number)
            document.querySelectorAll('.player-select').forEach(select => {
                select.addEventListener('change', function() {
                    const numInputId = this.dataset.numInput;
                    if (numInputId) {
                        const numInput = document.getElementById(numInputId);
                        const selectedOption = this.options[this.selectedIndex];
                        if (numInput && selectedOption) {
                            numInput.value = selectedOption.dataset.num || "";
                        }
                    }
                });
            });
        }

        // --- Helper for Weekly Schedule (Optimized for Mobile) ---
        function addScheduleItem() {
            const container = document.getElementById('schedule_list_container');
            const idx = container.children.length;
            const div = document.createElement('div');
            
            // FIXED: New Stacked Layout
            div.className = "p-3 bg-white border rounded-lg shadow-sm mb-3";
            
            const timeOptions = GAME_TIMES.map(t => `<option value="${t}">${t}</option>`).join('');
            const today = new Date().toISOString().split('T')[0]; // Get today

            div.innerHTML = `
                <div class="flex gap-2 mb-2">
                    <input type="date" id="sch_date_${idx}" value="${today}" class="flex-1 p-2 border rounded text-sm focus:ring-brand-gold focus:border-brand-gold bg-white text-left">
                    <select id="sch_time_${idx}" class="w-24 p-2 border rounded text-sm bg-white focus:ring-brand-gold focus:border-brand-gold">${timeOptions}</select>
                </div>
                <div class="flex gap-2 items-center">
                    <select id="sch_away_${idx}" class="flex-1 min-w-0 p-2 border rounded text-sm bg-white focus:ring-brand-gold focus:border-brand-gold team-select">${TEAM_KEYS.map(k=>`<option value="${k}">${k}</option>`).join('')}</select>
                    <span class="text-gray-400 text-xs font-bold">VS</span>
                    <select id="sch_home_${idx}" class="flex-1 min-w-0 p-2 border rounded text-sm bg-white focus:ring-brand-gold focus:border-brand-gold team-select">${TEAM_KEYS.map(k=>`<option value="${k}">${k}</option>`).join('')}</select>
                    <button onclick="this.parentElement.parentElement.remove()" class="text-red-500 hover:bg-red-50 p-1 rounded text-xl">&times;</button>
                </div>
            `;
            container.appendChild(div);
        }

        // --- Helper for Standings Schedule (Optimized for Mobile) ---
        function addStandingsGameItem() {
            const container = document.getElementById('standings_schedule_list_container');
            const idx = container.children.length;
            const div = document.createElement('div');
            // FIXED: New Stacked Layout
            div.className = "p-3 bg-white border rounded-lg shadow-sm mb-3";
            
            const timeOptions = GAME_TIMES.map(t => `<option value="${t}">${t}</option>`).join('');
            const today = new Date().toISOString().split('T')[0]; // Get today

            div.innerHTML = `
                <div class="flex gap-2 mb-2">
                    <input type="date" id="std_sch_date_${idx}" value="${today}" class="flex-1 p-2 border rounded text-sm focus:ring-brand-gold focus:border-brand-gold bg-white text-left">
                    <select id="std_sch_time_${idx}" class="w-24 p-2 border rounded text-sm bg-white focus:ring-brand-gold focus:border-brand-gold">${timeOptions}</select>
                </div>
                <div class="flex gap-2 items-center">
                    <select id="std_sch_away_${idx}" class="flex-1 min-w-0 p-2 border rounded text-sm bg-white focus:ring-brand-gold focus:border-brand-gold team-select">${TEAM_KEYS.map(k=>`<option value="${k}">${k}</option>`).join('')}</select>
                    <span class="text-center shrink-0 text-xs font-bold">VS</span>
                    <select id="std_sch_home_${idx}" class="flex-1 min-w-0 p-2 border rounded text-sm bg-white focus:ring-brand-gold focus:border-brand-gold team-select">${TEAM_KEYS.map(k=>`<option value="${k}">${k}</option>`).join('')}</select>
                    <button onclick="this.parentElement.parentElement.remove()" class="text-red-500 hover:bg-red-50 p-1 rounded text-xl">&times;</button>
                </div>
            `;
            container.appendChild(div);
        }

        // --- Helper for POTW Stats ---
        function addStatItem() {
            const container = document.getElementById('stats_list_container');
            const idx = container.children.length;
            const div = document.createElement('div');
            div.className = "flex gap-2 items-center";
            
            const typeOptions = STAT_TYPES.map(t => `<option value="${t.val}">${t.label}</option>`).join('');
            
            div.innerHTML = `
                <input type="text" id="stat_val_${idx}" placeholder="æ•¸å€¼ (28)" class="w-20 p-2 border rounded text-sm focus:ring-brand-gold focus:border-brand-gold">
                <select id="stat_type_${idx}" onchange="toggleCustomStat(${idx})" class="w-32 p-2 border rounded text-sm bg-white focus:ring-brand-gold focus:border-brand-gold">
                    ${typeOptions}
                </select>
                <input type="text" id="stat_cust_${idx}" placeholder="è‡ªè¨‚å–®ä½" class="flex-1 p-2 border rounded text-sm hidden focus:ring-brand-gold focus:border-brand-gold">
                <button onclick="this.parentElement.remove()" class="text-red-500 font-bold px-2">&times;</button>
            `;
            container.appendChild(div);
        }

        function toggleCustomStat(idx) {
            const select = document.getElementById(`stat_type_${idx}`);
            const customInput = document.getElementById(`stat_cust_${idx}`);
            if (select.value === 'custom') {
                customInput.classList.remove('hidden');
            } else {
                customInput.classList.add('hidden');
            }
        }

        // --- Robust Event Binding (NEW LOGIC) ---
        function bindDynamicEvents() {
            const container = document.getElementById('dynamic-form');
            if(!container) return;

            const teamSelects = container.querySelectorAll('.team-select');
            teamSelects.forEach(select => {
                select.addEventListener('change', function() {
                    const teamName = this.value;
                    const playerSelects = container.querySelectorAll(`.player-select[data-team-select="${this.id}"]`);
                    
                    playerSelects.forEach(pSelect => {
                        // Reset
                        pSelect.innerHTML = '<option value="">è«‹é¸æ“‡çƒå“¡</option>';
                        pSelect.disabled = true;
                        pSelect.classList.add('disabled-input');
                        pSelect.value = "";
                        
                        const numInputId = pSelect.dataset.numInput;
                        if(numInputId) {
                            const numInput = document.getElementById(numInputId);
                            if(numInput) numInput.value = "";
                        }

                        // Populate
                        if (teamName && ROSTERS[teamName]) {
                            pSelect.disabled = false;
                            pSelect.classList.remove('disabled-input');
                            ROSTERS[teamName].forEach(player => {
                                const option = document.createElement('option');
                                option.value = player.name;
                                option.text = player.name; 
                                option.dataset.num = player.num;
                                pSelect.appendChild(option);
                            });
                        }
                    });
                });
            });

            // Player select change listener (Auto-fill Number)
            const playerSelects = container.querySelectorAll('.player-select');
            playerSelects.forEach(select => {
                select.addEventListener('change', function() {
                    const numInputId = this.dataset.numInput;
                    if (numInputId) {
                        const numInput = document.getElementById(numInputId);
                        if (numInput) {
                            const selectedOption = this.options[this.selectedIndex];
                            numInput.value = selectedOption.dataset.num || "";
                        }
                    }
                });
            });
        }

        // --- Helper: Render Logos ---
        function renderLogos() {
            // No longer needed as logos are now inline images
        }

        // --- Generation Logic ---
        function generateCopy() {
            let output = "";
            const getValue = (id) => document.getElementById(id)?.value || "";
            const getTeam = (key) => TEAMS[key];

            const getNextGameText = () => {
                const date = getValue('next_date');
                if(!date) return "";
                const mmdd = formatMMDD(date);
                const day = getDayChi(date);
                const time = getValue('next_time');
                const home = getValue('next_home');
                const away = getValue('next_away');
                const arena = TEAMS[home].arena;
                return `ğŸ“Œ ä¸‹å ´æ¯”è³½ï¼Œä¸€èµ·è¿é¢¨è€Œä¸Šã€‚\nâ–Œ${mmdd}ï¼ˆ${day}ï¼‰ï½œ${time}ï½œ${TEAMS[away].full}ï¼ˆå®¢ï¼‰ vs. ${TEAMS[home].full}ï¼ˆä¸»ï¼‰ï½œ${arena}`;
            };
            
            const getNextGameTextShort = () => {
                const date = getValue('next_date');
                if(!date) return "";
                const monthDay = formatMonthDay(date); 
                const time = getValue('next_time'); 
                const home = getValue('next_home');
                const away = getValue('next_away');
                const num = getValue('next_game_num');
                return `ğŸ“º NEXT GAME\n${monthDay}ï½œGame${num}ï½œ${time}ï½œ${TEAMS[away].full}ï¼ˆå®¢ï¼‰ vs. ${TEAMS[home].full}ï¼ˆä¸»ï¼‰`;
            }
            
            const getLocalPlayerNextGame = () => {
                const date = getValue('next_date');
                if(!date) return "";
                const mmdd = formatMMDD(date);
                const day = getDayChi(date);
                const time = getValue('next_time');
                const home = getValue('next_home');
                const away = getValue('next_away');
                const arena = TEAMS[home].arena;
                const player = getValue('lp_next_player_name');
                return `ğŸ“Œ ä¸‹å ´${player}ï¼š\nâ–Œ${mmdd}ï¼ˆ${day}ï¼‰ï½œ${time}ï½œ${TEAMS[away].full}ï¼ˆå®¢ï¼‰ vs. ${TEAMS[home].full}ï¼ˆä¸»ï¼‰ï½œ${arena}`;
            };


            if (currentMode === 'game_preview') {
                const date = getValue('match_date');
                const time = getValue('match_time');
                const homeKey = getValue('home_team');
                const awayKey = getValue('away_team');
                const home = TEAMS[homeKey];
                const away = TEAMS[awayKey];
                
                const headerDate = `${toMathBoldSerif(formatMonthDay(date))}ï¼ˆ${toMathBoldSerif(getDayName(date))}ï¼‰`; 
                
                output = `#${toMathBoldSerif('GAMEDAY')}& #${toMathBoldSerif('ROSTER')}ï½œ${headerDate}\n\n`;
                output += `ä¾‹è¡Œè³½${toMathBoldSerif('GAME')}${toMathBoldSerif(getValue('game_num'))}âœ¦${time}${away.emoji}${awayKey} vs ${homeKey}${home.emoji}âœ¦\n\n`;
                output += `${getValue('highlight_text')}\n\nâ€”\n\n`;
                output += `ğŸ‘‰ğŸ»è³½äº‹åœ°é»ğŸ“${home.arena}\n${BROADCAST_INFO}\n`;
                output += `ğŸ‘‰ğŸ»YTè½‰æ’­é€£çµï½œ${getValue('yt_link')}\n\n`;
                output += `${COMMON_TAGS} #TPBLä¾‹è¡Œè³½ #moltentaiwan`;

            } else if (currentMode === 'weekday_preview') {
                const date = getValue('match_date');
                const home = TEAMS[getValue('home_team')];
                const away = TEAMS[getValue('away_team')];
                const dayName = getDayName(date); 
                const mmdd = formatMMDD(date); 
                const dayChi = getDayChi(date); 
                const title = getValue('promo_title');
                
                output = `ğŸ€${toMathBoldSerif(title)}\n\n`;
                output += `${getValue('promo_text')}\n\n-\n\n`;
                output += `ğŸ“Œ å°é€±æœ«å°±çœ‹ç±ƒçƒï¼š\n`;
                output += `â–Œ${mmdd}ï¼ˆ${dayChi}ï¼‰ï½œ${getValue('match_time')}ï½œ${away.full}ï¼ˆå®¢ï¼‰ vs. ${home.full}ï¼ˆä¸»ï¼‰ï½œ${home.arena}\n\n-\n\n`;
                if(getValue('promo_link')) output += `${getValue('promo_link')}\n\n`;
                output += `${COMMON_TAGS}`;

            } else if (currentMode === 'matchup_highlight') {
                 const home = TEAMS[getValue('mu_home_team')];
                 const away = TEAMS[getValue('mu_away_team')];
                 const homePlayer = getValue('mu_home_player');
                 const awayPlayer = getValue('mu_away_player');
                 
                 output = `âš”ï¸${toMathBoldSerif('MATCH UP')}ï½œ${homePlayer}${home.emoji} vs. ${awayPlayer}${away.emoji}\n\n`;
                 output += `${getValue('matchup_content')}\n\n-\n\n`;
                 
                 const date = getValue('next_date');
                 if(date) {
                     const mmdd = formatMMDD(date);
                     const day = getDayChi(date);
                     const time = getValue('next_time');
                     const h = TEAMS[getValue('next_home')];
                     const a = TEAMS[getValue('next_away')];
                     const num = getValue('next_game_num');
                     output += `ğŸ“Œ ä»Šå¤©æ™šä¸Šçœ‹é ‚å°–å°æ±ºï¼š\n`;
                     output += `â–Œ${mmdd}ï¼ˆ${day}ï¼‰ï½œ${time}ï½œ${a.full}ï¼ˆå®¢ï¼‰ vs. ${h.full}ï¼ˆä¸»ï¼‰ï½œ${h.arena}\n\n`;
                 }
                 output += `${COMMON_TAGS}`;

            } else if (currentMode === 'final_score') {
                output = `ğŸ”™${toMathBoldSerif('GAME')}${toMathBoldSerif(getValue('game_num'))} ${toMathBoldSerif('FINAL')}ï½œ${getValue('match_title')}\n\n`;
                output += `${getValue('match_recap')}\n\n`;
                
                const date = getValue('next_date');
                if(date) {
                    const monthDay = formatMonthDay(date);
                    const home = TEAMS[getValue('next_home')];
                    const away = TEAMS[getValue('next_away')];
                    output += `ğŸ“º NEXT GAME\n${monthDay}ï½œ${getValue('next_time')}ï½œ${away.full}ï¼ˆå®¢ï¼‰ vs. ${home.full}ï¼ˆä¸»ï¼‰`;
                }
                output += `\n\n${COMMON_TAGS} #TPBLä¾‹è¡Œè³½`;

            } else if (currentMode === 'game_highlight') {
                // UPDATED: Auto prefix + No YT link
                output = `â¤ï¸â€ğŸ”¥ğŸ‘‰ğŸ»ï½œ${getValue('hl_title')}\n\n`;
                output += `ğŸ“º ç·¯ä¾†é›»è¦–ç¶²ï½œåšæ–¯é‹å‹•äºŒå°ï½œTPBLå®˜æ–¹ YOUTUBE\n\n`;
                output += `${COMMON_TAGS} #TPBLä¾‹è¡Œè³½`;

            } else if (currentMode === 'press_conf') {
                output = `ğŸ—£ï¸${toMathBoldSerif(getValue('pc_title'))}\n\n`;
                output += `ğŸ’¬ã€Œ${getValue('pc_quote')}ã€\n\n`;
                output += `${getValue('pc_content')}\n\n`;
                output += getNextGameText();
                output += `\n\n${COMMON_TAGS}`;

            } else if (currentMode === 'potg') {
                const home = TEAMS[getValue('potg_home')];
                const away = TEAMS[getValue('potg_away')];
                output = `â¤ï¸${toMathBoldSerif('NOTHING BUT HIM')}\n\n`;
                output += `${away.emoji}/${home.emoji} #${toMathBoldSerif('å–®å ´æœ€ä½³çƒå“¡')}\n\n`;
                output += getNextGameTextShort();
                output += `\n\n-\n\n${getValue('promo_text')}\n\n${COMMON_TAGS} #TPBLä¾‹è¡Œè³½`;

            } else if (currentMode === 'local_player_highlight') {
                output = `${getValue('lp_title')}\n\n`;
                output += `${getValue('lp_content')}\n\n-\n\n`;
                output += getLocalPlayerNextGame();
                output += `\n\n${COMMON_TAGS}`;

            } else if (currentMode === 'career_milestone') {
                output = `${getValue('ms_title')}\n\n`;
                
                const msNum = getValue('ms_num');
                const msName = getValue('ms_name');
                const msEng = getValue('ms_eng_name');
                let playerInfo = '';
                if(msName) {
                    playerInfo = `#${msNum} ${msName}`;
                    if(msEng) playerInfo += ` ${msEng}`;
                }
                
                output += `${playerInfo}\n`;
                output += `${getValue('ms_achievement')}\n`;
                output += `${getValue('ms_content')}\n\n`;
                output += `${COMMON_TAGS}`;

            } else if (currentMode === 'weekly_schedule') {
                output = `â°ï½œ${toMathBoldSerif('WEEK')}${toMathBoldSerif(getValue('week_num'))} ${toMathBoldSerif('SCHEDULE')} #æ¯é€±è³½ç¨‹\n\n`;
                output += `${getValue('week_intro')}\n\n-\n\nğŸ“Œæœ¬é€±è³½äº‹é å‘Šï¼š\n`;
                
                const listContainer = document.getElementById('schedule_list_container');
                Array.from(listContainer.children).forEach(div => {
                    const inputs = div.querySelectorAll('input, select');
                    const d = inputs[0].value;
                    const t = inputs[1].value;
                    const a = TEAMS[inputs[2].value];
                    const h = TEAMS[inputs[3].value];
                    if(d) {
                         const mmdd = formatMMDD(d);
                         const day = getDayChi(d);
                         output += `â–Œ${mmdd}ï¼ˆ${day}ï¼‰ï½œ${t}ï½œ${a.full}ï¼ˆå®¢ï¼‰ vs. ${h.full}ï¼ˆä¸»ï¼‰ï½œ${h.arena}\n`;
                    }
                });
                output += `\n${COMMON_TAGS}`;

            } else if (currentMode === 'weekly_standings') {
                output = `ğŸ“Šï½œ${toMathBoldSerif('WEEK')}${toMathBoldSerif(getValue('week_num'))} #çƒéšŠæˆ°ç¸¾æ’è¡Œ\n\n`;
                output += `${getValue('standings_content')}\n\n`;
                
                const listContainer = document.getElementById('standings_schedule_list_container');
                const hasChildren = listContainer && listContainer.children.length > 0;
                
                if (hasChildren) {
                    output += `ğŸ“Œ æœ¬é€±è³½äº‹é å‘Šï¼š\n`;
                    Array.from(listContainer.children).forEach(div => {
                        const inputs = div.querySelectorAll('input, select');
                        const d = inputs[0].value;
                        const t = inputs[1].value;
                        const a = inputs[2].value;
                        const h = inputs[3].value;
                        if(d) {
                             const mmdd = formatMMDD(d);
                             const day = getDayChi(d);
                             const aTeam = TEAMS[a];
                             const hTeam = TEAMS[h];
                             output += `â–Œ${mmdd}ï¼ˆ${day}ï¼‰ï½œ${t}ï½œ${aTeam.full}ï¼ˆå®¢ï¼‰ vs. ${hTeam.full}ï¼ˆä¸»ï¼‰ï½œ${hTeam.arena}\n`;
                        }
                    });
                     output += `\n${COMMON_TAGS}`;
                } else {
                    output += `\n${COMMON_TAGS}`;
                }

            } else if (currentMode === 'top5') {
                output = `ğŸ’£ï½œ${toMathBoldSerif('TOP')}ğŸ“âœ¦${toMathBoldSerif('Week')}${toMathBoldSerif(getValue('week_num'))}ğŸ“¢\n\n`;
                output += `${getValue('top5_intro')}\n\n`;
                
                for (let i = 5; i >= 1; i--) {
                    const teamKey = document.getElementById(`top${i}_team`)?.value;
                    const num = document.getElementById(`top${i}_num`)?.value;
                    const name = document.getElementById(`top${i}_name`)?.value;
                    
                    if (name) { 
                        const team = TEAMS[teamKey];
                        const circledNum = ['â‘ ', 'â‘¡', 'â‘¢', 'â‘£', 'â‘¤'][i-1];
                        output += `${circledNum}${team.emoji}${team.full} | #${num} ${name}\n`;
                    }
                }

                output += `\n${getValue('vote_link')}\n\n${COMMON_TAGS}`;

            } else if (currentMode === 'potw') {
                const team = TEAMS[getValue('player_team')];
                const name = getValue('player_name_select');
                
                output = `ğŸ¥‡ ${toMathBoldSerif('PLAYER OF THE WEEK')}ï½œ#å–®é€±è¡¨ç¾æœ€ä½³çƒå“¡\n\n`;
                output += `ğŸ«¶ğŸ» ${toMathBoldSerif('NOTHING BUT')}${team.emoji}${getValue('player_name')}\n\n`;
                
                const statContainer = document.getElementById('stats_list_container');
                let statsArr = [];
                Array.from(statContainer.children).forEach(div => {
                    const val = div.querySelector('input[type="text"]').value;
                    const select = div.querySelector('select');
                    let unit = select.value;
                    
                    if (unit === 'custom') {
                        unit = div.querySelectorAll('input[type="text"]')[1].value;
                    }
                    
                    if (val) {
                        statsArr.push(`${val} ${unit}`);
                    }
                });
                
                output += `${toMathBoldSerif('STATS')}ï½œ${statsArr.join(' / ')}\n\n`;
                output += `${getValue('player_desc')}\n\n-\n\n`;
                
                const date = getValue('next_date');
                if(date) {
                    const mmdd = formatMMDD(date);
                    const day = getDayChi(date);
                    const home = TEAMS[getValue('next_home')];
                    const away = TEAMS[getValue('next_away')];
                    const time = getValue('next_time');
                    const nameOnly = getValue('player_name_select').split(' ')[0] || "";
                    
                    output += `ğŸ“Œ ä¼‘æ¯ä¸€ä¸‹å›ä¾†çœ‹${nameOnly}ç™¼å¨ğŸ‘€\n`;
                    output += `â–Œ${mmdd}ï¼ˆ${day}ï¼‰ï½œ${time}ï½œ${away.full}ï¼ˆå®¢ï¼‰ vs. ${home.full}ï¼ˆä¸»ï¼‰ï½œ${home.arena}`;
                }
                output += `\n\n${COMMON_TAGS}`;
                
            } else if (currentMode === 'weekly_local_eff') {
                output = `ğŸ”¥${toMathBoldSerif('POWERFUL LOCALS')}ï½œ${toMathBoldSerif('WEEK')}${toMathBoldSerif(getValue('week_num'))} ${toMathBoldSerif('EFF RANKING')} æœ¬åœŸæ•ˆç‡å€¼æ’è¡Œâœ¨\n\n`;
                output += `${getValue('eff_intro')}\n\n`;
                
                for (let i = 1; i <= 5; i++) { 
                    const name = getValue(`eff${i}_name`);
                    if(name) {
                        const teamKey = getValue(`eff${i}_team`);
                        const team = TEAMS[teamKey];
                        const num = getValue(`eff${i}_num`);
                        const val = getValue(`eff${i}_val`);
                        const desc = getValue(`eff${i}_desc`);
                        
                        output += `${team.emoji} #${num} ${name} | EFF ${val}\n`;
                        if(desc) output += `${desc}\n\n`;
                        else output += `\n`;
                    }
                }
                
                output += `${COMMON_TAGS}`;

            } else if (currentMode === 'monthly_kicks') {
                output = `ğŸ‘Ÿ${toMathBoldSerif('KICKS OF THE MONTH')}ï½œ${toMathBoldSerif(getValue('kicks_month'))}\n\n`;
                output += `${getValue('kicks_intro')}\n\n`;
                output += `${getValue('kicks_month').replace('.','')}æœˆç²¾é¸å¯¦æˆ°çƒé‹ä¸€æ¬¡çœ‹ğŸ‘€ğŸ‘Ÿ\n\n`;
                output += `Presented by @momentum.tw\n\n`;
                output += `${COMMON_TAGS} #momentum`;

            } else if (currentMode === 'season_stats') {
                // MODIFIED: Season Stats generation logic
                output = `ğŸ“Š${toMathBoldSerif('TPBL ALL-TIME REGULAR SEASON STATS')}ï½œ${toMathBoldSerif(getValue('stats_title_suffix'))}\n\n`;
                output += `${getValue('stats_content')}\n\n`;
                
                // Generate Date Note
                const cutoff = getValue('stats_cutoff_date');
                const s2425 = document.getElementById('season_2425').checked;
                const s2526 = document.getElementById('season_2526').checked;
                let seasons = [];
                if(s2425) seasons.push('24-25');
                if(s2526) seasons.push('25-26');
                
                if(cutoff) {
                   output += `*æ•¸æ“šçµ±è¨ˆè‡³${formatDateFull(cutoff)}ï¼ŒåŒ…å«${seasons.join('ã€')}è³½å­£\n\n-\n\n`;
                }
                
                // Generate Vote Info
                const month = getValue('stats_vote_month');
                output += `ğŸ“Œ ${month}æœˆMVPæŠ•ç¥¨é€²è¡Œä¸­ :\n`;
                output += `ğŸ”—æŠ•ç¥¨é€£çµï½œ${FIXED_VOTE_LINK}\n\n`;
                
                output += `${COMMON_TAGS}`;
            }

            document.getElementById('output-text').value = output;
        }

        // --- Utils ---
        function copyToClipboard() {
            const copyText = document.getElementById("output-text");
            copyText.select();
            document.execCommand("copy");
            
            const btn = document.getElementById("copy-text");
            const original = btn.innerText;
            btn.innerText = "å·²è¤‡è£½ï¼";
            setTimeout(() => btn.innerText = original, 2000);
        }

        // Initialize
        switchMode('game_preview');
        // renderLogos(); // Removed SVG render call
    </script>
</body>
</html>
