<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <!-- Title -->
    <title>TPBL | ç¤¾ç¾¤æ–‡æ¡ˆç”Ÿæˆå·¥å…·</title>
    <meta name="description" content="TPBL è·ç±ƒè¯ç›Ÿç¤¾ç¾¤æ–‡æ¡ˆè‡ªå‹•ç”Ÿæˆèˆ‡ç®¡ç†å·¥å…·">
    
    <!-- Favicon -->
    <link rel="icon" href="https://tpbl.basketball/favicon.png">
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Noto Sans TC', sans-serif; -webkit-tap-highlight-color: transparent; }
        
        /* Sidebar Styles */
        .sidebar-item.active { background-color: #D8BF98; color: #19191A; font-weight: 700; }
        .sidebar-item:hover { color: #ffffff !important; }

        /* Scrollbar Hiding */
        ::-webkit-scrollbar { display: none; }
        * { -ms-overflow-style: none; scrollbar-width: none; }
        
        /* Custom Colors */
        .text-brand-gold { color: #D8BF98; }
        .bg-brand-dark { background-color: #19191A; }
        .bg-brand-gold { background-color: #D8BF98; }
        .border-brand-gold { border-color: #D8BF98; }
        .focus-ring-gold:focus { --tw-ring-color: #D8BF98; }

        /* Custom Select */
        select {
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none;
            background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e");
            background-position: right 0.5rem center;
            background-repeat: no-repeat;
            background-size: 1.5em 1.5em;
            padding-right: 2.5rem !important;
        }

        /* Date Input Fixes */
        input[type="date"] {
            -webkit-appearance: none;
            appearance: none;
            background-color: white;
            padding-top: 0.5rem;
            padding-bottom: 0.5rem;
            font-family: 'Noto Sans TC', sans-serif;
            display: block;
        }
        /* Mobile-only min-height for touch targets */
        @media (max-width: 768px) {
            input[type="date"] {
                min-height: 2.75rem;
            }
        }
        input[type="date"]::-webkit-date-and-time-value { text-align: left; }

        /* Animations */
        .fade-out {
            opacity: 0;
            transition: opacity 0.5s ease-out;
            pointer-events: none;
        }
        .fade-in {
            animation: fadeIn 0.5s ease-in forwards;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        brand: {
                            dark: '#19191A',
                            gold: '#D8BF98',
                        }
                    }
                }
            }
        }
    </script>
</head>
<body class="bg-gray-50 text-gray-800 md:h-screen flex flex-col md:flex-row md:overflow-hidden min-h-screen">

    <!-- LANDING PAGE -->
    <!-- Updated: Removed overflow-y-auto to prevent scrollbar, used flex layout to fit screen -->
    <div id="landing-page" class="fixed inset-0 z-50 bg-brand-dark flex flex-col items-center justify-center px-4 md:px-6">
        
        <!-- Main Content Wrapper -->
        <div class="w-full max-w-3xl flex flex-col items-center">
            
            <!-- Main Visual Container -->
            <!-- Updated: Restricted max-height to ensure it fits on one screen (max-h-[45vh]) -->
            <div class="w-full mb-6 md:mb-8 rounded-2xl overflow-hidden shadow-2xl border border-gray-800 relative group flex-shrink-1 max-h-[40vh] md:max-h-[50vh]">
                <img 
                    src="https://assets.tpbl.basketball/production/banners/kl3My9saHVdhrTmoezJC3Am9KyBrMzgES3lVQYm2.jpg?20250930145249" 
                    alt="TPBL Season Visual" 
                    class="w-full h-full object-cover opacity-90 group-hover:opacity-100 transition duration-700"
                    onerror="this.style.display='none'; document.getElementById('fallback-visual').classList.remove('hidden');"
                >
                <div id="fallback-visual" class="hidden w-full h-64 bg-gray-900 flex items-center justify-center">
                    <span class="text-gray-600 text-sm">ä¸»è¦–è¦ºåœ–ç‰‡è¼‰å…¥å¤±æ•—</span>
                </div>
                <div class="absolute inset-0 bg-gradient-to-t from-brand-dark via-transparent to-transparent"></div>
            </div>

            <!-- Text Content -->
            <div class="relative z-10 max-w-2xl flex-shrink-0 text-center">
                <!-- Logo -->
                <div class="mb-4 md:mb-6 flex justify-center">
                    <svg class="h-8 md:h-10 w-auto" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 120 44" fill="none">
                        <path d="M61.2654 17.7247C61.9017 15.9066 63.5198 9.80155 64.2979 6.71082C64.5686 5.56151 64.4628 4.35565 63.9961 3.27102C63.7265 2.70741 63.3569 2.19736 62.9053 1.76566C61.8884 0.803594 60.5381 0.273137 59.1383 0.285742H32.4381C34.2561 1.20205 34.9834 2.23836 35.4415 3.24557C35.736 3.91462 35.9833 5.22 35.5288 7.06716C35.2306 8.28527 29.9982 27.6332 29.9982 27.6332C29.9982 27.6332 47.9353 25.477 52.1059 24.6116C54.9494 24.0298 59.8764 21.6735 61.2654 17.7247ZM51.0624 16.9429C50.3057 18.953 49.0007 20.7108 47.2956 22.0168C45.5905 23.3227 43.5535 24.1247 41.4157 24.3316L45.15 10.4306L40.8303 7.6344H53.5568C53.5568 7.6344 52.3205 13.5104 51.0624 16.9429Z" fill="white"></path>
                        <path d="M67.4359 6.33628C66.865 8.4707 62.9525 23.0226 62.9525 23.0226C62.9525 23.0226 73.1665 21.7899 79.2279 20.7463C87.0311 19.4009 93.2489 15.2703 95.107 9.98335C96.2414 6.75809 96.1687 4.79457 95.9033 3.8019C95.728 3.21289 95.432 2.66678 95.0342 2.19835C94.5313 1.59242 93.8995 1.10632 93.185 0.775453C92.4704 0.444584 91.691 0.277274 90.9036 0.285737H64.5488C66.7232 1.37294 68.1595 3.61281 67.4359 6.33628ZM85.3003 7.64531C85.0217 9.06412 84.6127 10.4542 84.0785 11.7978C82.3805 16.2048 78.6498 18.481 74.4828 19.0264L76.7953 10.4088L72.5083 7.63439L85.3003 7.64531Z" fill="white"></path>
                        <path d="M32.4708 3.751C32.2927 3.27496 32.0317 2.83422 31.6999 2.44926C31.1204 1.76101 30.3964 1.20877 29.5795 0.831724C28.7626 0.454676 27.8726 0.262062 26.9729 0.267571H0C3.43616 1.95111 4.70153 3.94734 3.42888 7.62712H12.8574L3.06891 43.8868H13.5119L23.2277 7.6344H32.318C32.9216 5.87814 32.7617 4.62368 32.4708 3.751Z" fill="white"></path>
                        <path d="M28.5074 33.1856L25.6312 43.9049H36.1614L40.1903 28.8913L24.3076 30.8184L28.5074 33.1856Z" fill="white"></path>
                        <path d="M90.1327 27.6623C89.6818 24.317 86.1621 22.808 80.886 24.0698L77.5444 36.5199H69.7812L72.9228 24.8261L62.1162 26.1388L57.3456 43.9049H80.7624C84.144 41.9996 86.7111 38.698 88.1438 35.9418C89.3255 33.6728 90.5036 30.4185 90.1327 27.6623Z" fill="white"></path>
                        <path d="M83.1223 21.5972C89.0637 21.1754 91.849 22.728 92.0926 26.4624C93.8561 22.3753 97.9104 19.9537 102.274 19.4082C98.0777 18.8592 96.0415 15.7176 96.0197 12.5287C94.2125 16.3612 89.4491 20.6227 83.1223 21.5972Z" fill="#D4C09D"></path>
                        <path d="M99.0413 2.90741C99.4449 3.91826 99.2776 5.75814 99.0667 6.60172L98.3395 9.79791C96.9396 15.0303 100.256 18.2919 106.426 18.2919C106.426 18.2919 109.502 7.11444 109.804 6.09632C110.702 3.02741 107.986 0.278488 104.132 0.278488H96.0706C96.7348 0.458149 97.3486 0.788905 97.8639 1.24494C98.3792 1.70097 98.7822 2.26993 99.0413 2.90741Z" fill="white"></path>
                        <path d="M101.55 36.6363L105.855 20.7463C100.096 20.4373 94.0343 25.0443 92.6671 30.8548L89.1655 43.9049H113.739L119.993 36.5199L101.55 36.6363Z" fill="white"></path>
                    </svg>
                </div>
                
                <!-- Title -->
                <h1 class="text-2xl md:text-4xl font-bold text-white mb-2 md:mb-3 tracking-wide">ç¤¾ç¾¤æ–‡æ¡ˆç”Ÿæˆå·¥å…·</h1>
                <p class="text-gray-400 text-base md:text-xl mb-6 md:mb-10 font-light">ä¸€å€‹ç°¡å–®å¯¦ç”¨çš„å·¥å…·ï¼Œå¹«åŠ©åœ˜éšŠç”¢å‡ºç¤¾ç¾¤è²¼æ–‡ç´ æã€‚</p>
                
                <button onclick="enterApp()" class="bg-brand-gold text-brand-dark text-lg font-bold py-3 px-12 rounded-full hover:bg-white hover:scale-105 transition-all duration-300 shadow-lg flex items-center gap-2 mx-auto">
                    é–‹å§‹ä½¿ç”¨ <span>â†’</span>
                </button>
            </div>
        </div>

        <!-- Footer: Positioned relatively at the bottom of flex container -->
        <div class="mt-8 md:mt-12 pb-6 text-gray-600 text-xs md:text-sm flex-shrink-0">
            <p>powered by Alvin LIU</p>
            <p>Â© TPBL LEAGUE 2025 All rights reserved.</p>
        </div>
    </div>

    <!-- MAIN APP -->
    <!-- Updated: Changed h-screen to min-h-screen md:h-screen for mobile scrolling -->
    <div id="app-container" class="hidden min-h-screen md:h-screen w-full flex flex-col md:flex-row md:overflow-hidden">
        <!-- Sidebar -->
        <aside class="w-full md:w-64 bg-brand-dark text-gray-400 flex flex-col flex-shrink-0 md:h-full z-30 sticky top-0 md:relative shadow-lg md:shadow-none">
            <div class="p-4 md:p-6 border-b border-gray-800 flex justify-between items-center bg-brand-dark z-40 relative">
                <div class="flex items-center gap-3">
                    <div id="logo-container" onclick="location.reload()" class="cursor-pointer" title="è¿”å›é¦–é ">
                        <svg class="h-6 md:h-7 w-auto" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 120 44" fill="none">
                            <path d="M61.2654 17.7247C61.9017 15.9066 63.5198 9.80155 64.2979 6.71082C64.5686 5.56151 64.4628 4.35565 63.9961 3.27102C63.7265 2.70741 63.3569 2.19736 62.9053 1.76566C61.8884 0.803594 60.5381 0.273137 59.1383 0.285742H32.4381C34.2561 1.20205 34.9834 2.23836 35.4415 3.24557C35.736 3.91462 35.9833 5.22 35.5288 7.06716C35.2306 8.28527 29.9982 27.6332 29.9982 27.6332C29.9982 27.6332 47.9353 25.477 52.1059 24.6116C54.9494 24.0298 59.8764 21.6735 61.2654 17.7247ZM51.0624 16.9429C50.3057 18.953 49.0007 20.7108 47.2956 22.0168C45.5905 23.3227 43.5535 24.1247 41.4157 24.3316L45.15 10.4306L40.8303 7.6344H53.5568C53.5568 7.6344 52.3205 13.5104 51.0624 16.9429Z" fill="white"></path>
                            <path d="M67.4359 6.33628C66.865 8.4707 62.9525 23.0226 62.9525 23.0226C62.9525 23.0226 73.1665 21.7899 79.2279 20.7463C87.0311 19.4009 93.2489 15.2703 95.107 9.98335C96.2414 6.75809 96.1687 4.79457 95.9033 3.8019C95.728 3.21289 95.432 2.66678 95.0342 2.19835C94.5313 1.59242 93.8995 1.10632 93.185 0.775453C92.4704 0.444584 91.691 0.277274 90.9036 0.285737H64.5488C66.7232 1.37294 68.1595 3.61281 67.4359 6.33628ZM85.3003 7.64531C85.0217 9.06412 84.6127 10.4542 84.0785 11.7978C82.3805 16.2048 78.6498 18.481 74.4828 19.0264L76.7953 10.4088L72.5083 7.63439L85.3003 7.64531Z" fill="white"></path>
                            <path d="M32.4708 3.751C32.2927 3.27496 32.0317 2.83422 31.6999 2.44926C31.1204 1.76101 30.3964 1.20877 29.5795 0.831724C28.7626 0.454676 27.8726 0.262062 26.9729 0.267571H0C3.43616 1.95111 4.70153 3.94734 3.42888 7.62712H12.8574L3.06891 43.8868H13.5119L23.2277 7.6344H32.318C32.9216 5.87814 32.7617 4.62368 32.4708 3.751Z" fill="white"></path>
                            <path d="M28.5074 33.1856L25.6312 43.9049H36.1614L40.1903 28.8913L24.3076 30.8184L28.5074 33.1856Z" fill="white"></path>
                            <path d="M90.1327 27.6623C89.6818 24.317 86.1621 22.808 80.886 24.0698L77.5444 36.5199H69.7812L72.9228 24.8261L62.1162 26.1388L57.3456 43.9049H80.7624C84.144 41.9996 86.7111 38.698 88.1438 35.9418C89.3255 33.6728 90.5036 30.4185 90.1327 27.6623Z" fill="white"></path>
                            <path d="M83.1223 21.5972C89.0637 21.1754 91.849 22.728 92.0926 26.4624C93.8561 22.3753 97.9104 19.9537 102.274 19.4082C98.0777 18.8592 96.0415 15.7176 96.0197 12.5287C94.2125 16.3612 89.4491 20.6227 83.1223 21.5972Z" fill="#D4C09D"></path>
                            <path d="M99.0413 2.90741C99.4449 3.91826 99.2776 5.75814 99.0667 6.60172L98.3395 9.79791C96.9396 15.0303 100.256 18.2919 106.426 18.2919C106.426 18.2919 109.502 7.11444 109.804 6.09632C110.702 3.02741 107.986 0.278488 104.132 0.278488H96.0706C96.7348 0.458149 97.3486 0.788905 97.8639 1.24494C98.3792 1.70097 98.7822 2.26993 99.0413 2.90741Z" fill="white"></path>
                            <path d="M101.55 36.6363L105.855 20.7463C100.096 20.4373 94.0343 25.0443 92.6671 30.8548L89.1655 43.9049H113.739L119.993 36.5199L101.55 36.6363Z" fill="white"></path>
                        </svg>
                    </div>
                </div>
                
                <!-- Mobile Menu Button: Updated to Double Bar Style -->
                <button onclick="toggleSidebar()" class="md:hidden bg-white text-black rounded-full w-8 h-8 flex items-center justify-center focus:outline-none hover:bg-gray-100 transition shadow-sm z-50">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M4 9h16M4 15h16" />
                    </svg>
                </button>
            </div>
            
            <!-- Sidebar Nav -->
            <nav id="sidebar-nav" class="flex flex-col flex-1 overflow-y-auto py-4 space-y-1 bg-brand-dark absolute md:static w-full top-full left-0 shadow-xl md:shadow-none transition-all duration-500 ease-in-out max-h-0 opacity-0 md:max-h-full md:opacity-100 overflow-hidden z-30 origin-top">
                <div class="px-4 py-2 text-xs font-bold text-gray-600 uppercase tracking-wider">è³½å‰é ç†±</div>
                <button onclick="switchMode('weekday_preview')" id="btn-weekday_preview" class="sidebar-item w-full text-left px-6 py-3 hover:bg-gray-800 transition flex items-center gap-3"><span>ğŸ—“ï¸</span> å¹³æ—¥è³½äº‹é å‘Š</button>
                <button onclick="switchMode('game_preview')" id="btn-game_preview" class="sidebar-item w-full text-left px-6 py-3 hover:bg-gray-800 transition flex items-center gap-3"><span>ğŸ”¥</span> å–®å ´è³½ç¨‹é å‘Š</button>
                <button onclick="switchMode('weekly_schedule')" id="btn-weekly_schedule" class="sidebar-item w-full text-left px-6 py-3 hover:bg-gray-800 transition flex items-center gap-3"><span>ğŸ“…</span> æ¯é€±è³½ç¨‹è¡¨</button>

                <div class="px-4 py-2 mt-4 text-xs font-bold text-gray-600 uppercase tracking-wider">è³½äº‹é€²è¡Œ / è³½å¾Œ</div>
                <button onclick="switchMode('final_score')" id="btn-final_score" class="sidebar-item w-full text-left px-6 py-3 hover:bg-gray-800 transition flex items-center gap-3"><span>ğŸ</span> çµ‚å ´æ¯”åˆ†</button>
                <button onclick="switchMode('game_highlight')" id="btn-game_highlight" class="sidebar-item w-full text-left px-6 py-3 hover:bg-gray-800 transition flex items-center gap-3"><span>ğŸ¥</span> æœ¬å ´è³½äº‹ç²¾è¯</button>
                <button onclick="switchMode('press_conf')" id="btn-press_conf" class="sidebar-item w-full text-left px-6 py-3 hover:bg-gray-800 transition flex items-center gap-3"><span>ğŸ—£ï¸</span> è³½å¾Œè¨˜è€…æœƒ</button>
                <button onclick="switchMode('potg')" id="btn-potg" class="sidebar-item w-full text-left px-6 py-3 hover:bg-gray-800 transition flex items-center gap-3"><span>âš¡</span> å–®å ´æœ€ä½³çƒå“¡</button>

                <div class="px-4 py-2 mt-4 text-xs font-bold text-gray-600 uppercase tracking-wider">æ¯é€±ç¸½çµ</div>
                <button onclick="switchMode('weekly_standings')" id="btn-weekly_standings" class="sidebar-item w-full text-left px-6 py-3 hover:bg-gray-800 transition flex items-center gap-3"><span>ğŸ“Š</span> æ¯é€±æˆ°ç¸¾æ’è¡Œ</button>
                <button onclick="switchMode('top5')" id="btn-top5" class="sidebar-item w-full text-left px-6 py-3 hover:bg-gray-800 transition flex items-center gap-3"><span>ğŸ’£</span> æœ¬é€±äº”å¤§å¥½çƒ</button>
                <button onclick="switchMode('potw')" id="btn-potw" class="sidebar-item w-full text-left px-6 py-3 hover:bg-gray-800 transition flex items-center gap-3"><span>ğŸ¥‡</span> å–®é€±æœ€ä½³çƒå“¡</button>
            </nav>
        </aside>

        <!-- Main Content -->
        <main class="flex-1 flex flex-col md:flex-row md:h-full md:overflow-hidden relative">
            
            <!-- Input Area -->
            <div class="flex-1 overflow-y-auto p-4 md:p-8 bg-white md:h-full" id="input-container">
                <div class="max-w-2xl mx-auto pb-10 md:pb-0">
                    <h2 id="current-title" class="text-xl md:text-2xl font-bold mb-6 text-gray-800 border-l-4 border-brand-gold pl-4">è«‹é¸æ“‡åŠŸèƒ½</h2>
                    
                    <div id="dynamic-form" class="space-y-5">
                        <p class="text-gray-500">è«‹å¾å·¦å´é¸å–®é¸æ“‡æ‚¨è¦ç”Ÿæˆçš„è²¼æ–‡é¡å‹ã€‚</p>
                    </div>

                    <div class="mt-8 pt-6 border-t border-gray-100">
                        <button onclick="generateCopy()" class="w-full bg-brand-dark hover:bg-brand-gold hover:text-brand-dark text-white font-bold py-4 px-6 rounded-lg transition duration-200 flex justify-center items-center gap-2 shadow-lg">
                            <span>ç”Ÿæˆæ–‡æ¡ˆ</span>
                        </button>
                    </div>

                    <!-- Footer in Main App -->
                    <div class="mt-6 text-center text-gray-400 text-xs">
                        <p>powered by Alvin LIU</p>
                        <p class="mt-1">Â© TPBL LEAGUE 2025 All rights reserved.</p>
                    </div>
                </div>
            </div>

            <!-- Output Area -->
            <div class="w-full md:w-1/3 bg-gray-100 p-6 flex flex-col border-t md:border-t-0 md:border-l border-gray-200">
                <h3 class="text-lg font-bold mb-4 text-gray-700 flex items-center gap-2">
                    é è¦½çµæœ
                </h3>
                <textarea id="output-text" class="flex-1 w-full p-4 border border-gray-300 rounded-lg font-mono text-sm resize-none focus:outline-none focus:ring-2 focus:ring-brand-gold focus:border-brand-gold bg-white leading-relaxed h-64 md:h-auto" placeholder="æ–‡æ¡ˆå°‡é¡¯ç¤ºæ–¼æ­¤..."></textarea>
                
                <button onclick="copyToClipboard()" class="mt-4 w-full bg-white border-2 border-gray-200 hover:border-brand-dark text-gray-800 font-bold py-3 px-4 rounded-lg transition duration-200 flex justify-center items-center gap-2">
                    <span id="copy-text">ä¸€éµè¤‡è£½</span>
                </button>
            </div>

        </main>
    </div>

    <!-- JavaScript Logic -->
    <script>
        // --- Enter App from Landing Page ---
        function enterApp() {
            const landing = document.getElementById('landing-page');
            const app = document.getElementById('app-container');
            landing.classList.add('fade-out');
            setTimeout(() => {
                landing.style.display = 'none';
                app.classList.remove('hidden');
                app.classList.add('fade-in');
            }, 500);
        }

        // --- Mobile Sidebar Toggle with Animation Logic ---
        function toggleSidebar() {
            const nav = document.getElementById('sidebar-nav');
            if (nav.classList.contains('max-h-0')) {
                nav.classList.remove('max-h-0', 'opacity-0');
                nav.classList.add('max-h-screen', 'opacity-100');
            } else {
                nav.classList.add('max-h-0', 'opacity-0');
                nav.classList.remove('max-h-screen', 'opacity-100');
            }
        }

        // --- Data & Config ---
        const TEAMS = {
            "æˆ°ç¥": { full: "è‡ºåŒ—å°æ–°æˆ°ç¥", emoji: "ğŸ›¡ï¸", arena: "å’Œå¹³ç±ƒçƒé¤¨" },
            "æ”»åŸç…": { full: "æ–°ç«¹å¾¡åµ¿æ”»åŸç…", emoji: "ğŸ¦", arena: "æ–°ç«¹ç¸£ç«‹é«”è‚²é¤¨" },
            "ç‰¹æ”»": { full: "æ–°åŒ—ä¸­ä¿¡ç‰¹æ”»", emoji: "âš¡ï¸", arena: "æ–°èŠé«”è‚²é¤¨" },
            "åœ‹ç‹": { full: "æ–°åŒ—åœ‹ç‹", emoji: "ğŸ‘‘", arena: "æ–°èŠé«”è‚²é¤¨" },
            "å¤¢æƒ³å®¶": { full: "ç¦çˆ¾æ‘©æ²™å¤¢æƒ³å®¶", emoji: "ğŸ¦„", arena: "æ´²éš›è¿·ä½ è›‹" },
            "æµ·ç¥": { full: "é«˜é›„å…¨å®¶æµ·ç¥", emoji: "ğŸ”±", arena: "é«˜é›„å·¨è›‹" },
            "é›²è±¹": { full: "å°å•¤æ°¸è±é›²è±¹", emoji: "ğŸ†", arena: "æ¡ƒåœ’å·¨è›‹" }
        };
        const TEAM_KEYS = Object.keys(TEAMS);
        const GAME_TIMES = ["14:30", "17:00", "19:00"];
        
        const STAT_TYPES = [
            { label: "å¾—åˆ†", val: "pts" },
            { label: "ç±ƒæ¿", val: "reb" },
            { label: "åŠ©æ”»", val: "ast" },
            { label: "æŠ„æˆª", val: "stl" },
            { label: "é˜»æ”»", val: "blk" },
            { label: "æ•ˆç‡å€¼", val: "eff" },
            { label: "ä¸‰åˆ†å‘½ä¸­", val: "3pm" },
            { label: "æŠ•ç±ƒå‘½ä¸­", val: "fgm" },
            { label: "ç½°çƒå‘½ä¸­", val: "ftm" },
            { label: "è‡ªè¨‚", val: "custom" }
        ];

        const COMMON_TAGS = "#TPBL #NothingButLove #ç±ƒçƒæ€èƒ½ä¸æ„›";
        const BROADCAST_INFO = "ğŸ‘‰ğŸ»è½‰æ’­å¹³å° ğŸ“º ç·¯ä¾†é›»è¦–ç¶²ï½œåšæ–¯é‹å‹•äºŒå°ï½œTPBLå®˜æ–¹YOUTUBE";

        let currentMode = '';

        // --- Utils ---
        const toMathBoldSerif = (text) => {
            const map = {
                '0': 'ğŸ', '1': 'ğŸ', '2': 'ğŸ', '3': 'ğŸ‘', '4': 'ğŸ’', '5': 'ğŸ“', '6': 'ğŸ”', '7': 'ğŸ•', '8': 'ğŸ–', '9': 'ğŸ—',
                'A': 'ğ€', 'B': 'ğ', 'C': 'ğ‚', 'D': 'ğƒ', 'E': 'ğ„', 'F': 'ğ…', 'G': 'ğ†', 'H': 'ğ‡', 'I': 'ğˆ', 'J': 'ğ‰',
                'K': 'ğŠ', 'L': 'ğ‹', 'M': 'ğŒ', 'N': 'ğ', 'O': 'ğ', 'P': 'ğ', 'Q': 'ğ', 'R': 'ğ‘', 'S': 'ğ’', 'T': 'ğ“',
                'U': 'ğ”', 'V': 'ğ•', 'W': 'ğ–', 'X': 'ğ—', 'Y': 'ğ˜', 'Z': 'ğ™',
                'a': 'ğš', 'b': 'ğ›', 'c': 'ğœ', 'd': 'ğ', 'e': 'ğ', 'f': 'ğŸ', 'g': 'ğ ', 'h': 'ğ¡', 'i': 'ğ¢', 'j': 'ğ£',
                'k': 'ğ¤', 'l': 'ğ¥', 'm': 'ğ¦', 'n': 'ğ§', 'o': 'ğ¨', 'p': 'ğ©', 'q': 'ğª', 'r': 'ğ«', 's': 'ğ¬', 't': 'ğ­',
                'u': 'ğ®', 'v': 'ğ¯', 'w': 'ğ°', 'x': 'ğ±', 'y': 'ğ²', 'z': 'ğ³'
            };
            return String(text).split('').map(char => map[char] || char).join('');
        };

        const parseDateLocal = (dateStr) => {
            if (!dateStr) return new Date();
            const parts = dateStr.split('-');
            return new Date(parts[0], parts[1] - 1, parts[2]);
        };

        const getDayName = (dateStr) => {
            const date = parseDateLocal(dateStr);
            const days = ['SUN', 'MON', 'TUE', 'WED', 'THU', 'FRI', 'SAT'];
            return days[date.getDay()]; 
        };
        
        const getDayChi = (dateStr) => {
            const date = parseDateLocal(dateStr);
            const days = ['æ—¥', 'ä¸€', 'äºŒ', 'ä¸‰', 'å››', 'äº”', 'å…­'];
            return days[date.getDay()];
        };

        const formatMonthDay = (dateStr) => {
            const date = parseDateLocal(dateStr);
            const months = ["JAN", "FEB", "MAR", "APR", "MAY", "JUN", "JUL", "AUG", "SEP", "OCT", "NOV", "DEC"];
            return `${months[date.getMonth()]}.${String(date.getDate()).padStart(2, '0')}`;
        };

        const formatMMDD = (dateStr) => {
             const date = parseDateLocal(dateStr);
             return `${String(date.getMonth()+1).padStart(2,'0')}.${String(date.getDate()).padStart(2,'0')}`;
        };

        // --- UI Builders ---
        const createInput = (id, label, type="text", placeholder="", value="") => `
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-1">${label}</label>
                <input type="${type}" id="${id}" class="w-full p-2.5 border border-gray-300 rounded-md focus:ring-2 focus:ring-brand-gold focus:border-brand-gold" placeholder="${placeholder}" value="${value}">
            </div>
        `;

        const createSelect = (id, label, options) => `
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-1">${label}</label>
                <select id="${id}" class="w-full p-2.5 border border-gray-300 rounded-md bg-white focus:ring-2 focus:ring-brand-gold focus:border-brand-gold">
                    ${options.map(opt => `<option value="${opt}">${opt}</option>`).join('')}
                </select>
            </div>
        `;
        
        const createTeamSelect = (id, label) => createSelect(id, label, TEAM_KEYS);

        const createTimeSelect = (id, label, defaultValue="19:00") => `
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-1">${label}</label>
                <select id="${id}" class="w-full p-2.5 border border-gray-300 rounded-md bg-white focus:ring-2 focus:ring-brand-gold focus:border-brand-gold">
                    ${GAME_TIMES.map(t => `<option value="${t}" ${t === defaultValue ? 'selected' : ''}>${t}</option>`).join('')}
                </select>
            </div>
        `;

        const createTextarea = (id, label, placeholder="", rows=4, value="") => `
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-1">${label}</label>
                <textarea id="${id}" rows="${rows}" class="w-full p-2.5 border border-gray-300 rounded-md focus:ring-2 focus:ring-brand-gold focus:border-brand-gold" placeholder="${placeholder}">${value}</textarea>
            </div>
        `;

        // --- Switch Mode Logic ---
        function switchMode(mode) {
            currentMode = mode;
            document.querySelectorAll('.sidebar-item').forEach(el => el.classList.remove('active'));
            document.getElementById(`btn-${mode}`).classList.add('active');
            
            if (window.innerWidth < 768) {
                // Smooth close sidebar on mobile after selection
                const nav = document.getElementById('sidebar-nav');
                nav.classList.add('max-h-0', 'opacity-0');
                nav.classList.remove('max-h-screen', 'opacity-100');
            }

            const titles = {
                'weekday_preview': 'å¹³æ—¥è³½äº‹é å‘Š',
                'game_preview': 'å–®å ´è³½ç¨‹é å‘Š',
                'weekly_schedule': 'æ¯é€±è³½ç¨‹è¡¨',
                'final_score': 'çµ‚å ´æ¯”åˆ†',
                'game_highlight': 'æœ¬å ´è³½äº‹ç²¾è¯',
                'press_conf': 'è³½å¾Œè¨˜è€…æœƒç²¾è¯',
                'potg': 'å–®å ´æœ€ä½³çƒå“¡',
                'weekly_standings': 'æ¯é€±æˆ°ç¸¾æ’è¡Œ',
                'top5': 'æœ¬é€±äº”å¤§å¥½çƒ',
                'potw': 'å–®é€±æœ€ä½³çƒå“¡'
            };
            document.getElementById('current-title').innerText = titles[mode];
            renderForm(mode);
        }

        function renderForm(mode) {
            const container = document.getElementById('dynamic-form');
            let html = '';

            // Common Next Game Block (Updated Title)
            const nextGameBlock = `
                <div class="bg-gray-50 p-4 rounded-lg border border-gray-200 mt-4">
                    <p class="text-xs font-bold text-gray-500 mb-2 uppercase">ä¸‹å ´è³½äº‹è³‡è¨Š (Next Game)</p>
                    <div class="grid grid-cols-2 gap-4">
                        ${createInput('next_date', 'æ—¥æœŸ', 'date')}
                        ${createInput('next_game_num', 'å ´æ¬¡ (Game)', 'number')}
                        ${createTimeSelect('next_time', 'æ™‚é–“', '19:00')}
                        <div></div>
                        ${createTeamSelect('next_away', 'å®¢éšŠ (Away)')}
                        ${createTeamSelect('next_home', 'ä¸»éšŠ (Home)')}
                    </div>
                </div>
            `;

            if (mode === 'game_preview') {
                html += `
                    <div class="grid grid-cols-2 gap-4">
                        ${createInput('game_num', 'å ´æ¬¡ (GAME)', 'number', '32', '32')}
                        ${createInput('match_date', 'æ¯”è³½æ—¥æœŸ', 'date')}
                        ${createTimeSelect('match_time', 'æ¯”è³½æ™‚é–“', '19:00')}
                        <div></div>
                        ${createTeamSelect('away_team', 'å®¢éšŠ (Away)')}
                        ${createTeamSelect('home_team', 'ä¸»éšŠ (Home)')}
                    </div>
                    ${createTextarea('highlight_text', 'è§€è³½äº®é»', 'è¼¸å…¥æœ¬å ´çœ‹é»æ–‡æ¡ˆ...', 6)}
                    ${createInput('yt_link', 'YouTube è½‰æ’­é€£çµ', 'text')}
                `;
            } else if (mode === 'weekday_preview') {
                html += `
                     <div class="grid grid-cols-2 gap-4">
                        ${createInput('match_date', 'æ¯”è³½æ—¥æœŸ', 'date')}
                        ${createTimeSelect('match_time', 'æ¯”è³½æ™‚é–“', '19:00')}
                        ${createTeamSelect('away_team', 'å®¢éšŠ (Away)')}
                        ${createTeamSelect('home_team', 'ä¸»éšŠ (Home)')}
                    </div>
                    ${createInput('promo_title', 'é å‘Šæ¨™é¡Œ (å¦‚ï¼šWEDNESDAY NIGHT...)', 'text', 'WEDNESDAY NIGHT, LETâ€™S GOOOO')}
                    ${createTextarea('promo_text', 'é å‘Šæ–‡æ¡ˆ', 'æœ¬å­£é¦–æ¬¡äº¤æ‰‹çš„...', 4)}
                    ${createTextarea('promo_link', 'è´ŠåŠ©å•†ç‰ˆä½ (å¯æ›è¡Œ)', 'ğŸ“SPORTS NATIONSåº—é»è³‡è¨Š...', 3)}
                `;
            } else if (mode === 'final_score') {
                html += `
                    ${createInput('game_num', 'å ´æ¬¡ (GAME)', 'number', '31')}
                    ${createInput('match_title', 'æ¨™é¡Œ (ä¾‹å¦‚ï¼šå…¨éšŠã€Œè±¹ã€é€²13è¨˜å¤–ç·š...)', 'text')}
                    ${createTextarea('match_recap', 'æ¯”è³½å›é¡§æ–‡æ¡ˆ', '', 6)}
                    ${nextGameBlock}
                `;
            } else if (mode === 'game_highlight') {
                html += `
                    ${createInput('hl_title', 'ç²¾è¯æ¨™é¡Œ (å«Emoji)', 'text', 'â¤ï¸ğŸ‘‰ ï½œäºå–µé¦–ç¯€2è¨˜å¤–ç·š...')}
                    ${createInput('yt_link', 'YouTube é€£çµ', 'text')}
                `;
            } else if (mode === 'press_conf') {
                html += `
                    ${createInput('pc_title', 'æ¨™é¡Œ (è‹±æ–‡/ä¸­æ–‡)', 'text', 'ğŸ—£ï¸ FACING THE STORM...')}
                    ${createTextarea('pc_quote', 'èªéŒ„ (ä¸éœ€è¦æ‰“å¼•è™Ÿ)', '', 3)}
                    ${createTextarea('pc_content', 'å…§å®¹', '', 6)}
                    ${nextGameBlock}
                `;
            } else if (mode === 'potg') {
                html += `
                    <div class="grid grid-cols-2 gap-4 mb-4">
                        ${createTeamSelect('potg_away', 'å®¢éšŠ (Away)')}
                        ${createTeamSelect('potg_home', 'ä¸»éšŠ (Home)')}
                    </div>
                    ${nextGameBlock}
                    ${createInput('promo_text', 'åº•éƒ¨æ´»å‹•æ–‡æ¡ˆ', 'text', 'ğŸ€„æ‹šç«¶æŠ€ï¼Œè¶…å¸¶å‹...')}
                `;
            } else if (mode === 'weekly_schedule') {
                html += `
                    ${createInput('week_num', 'ç¬¬å¹¾é€± (Week)', 'number', '8')}
                    ${createTextarea('week_intro', 'æœ¬é€±è³½ç¨‹å¼•è¨€', '', 4)}
                    <div class="bg-gray-50 p-4 rounded-lg border border-gray-200">
                        <p class="text-sm font-bold mb-2">æœ¬é€±è³½ç¨‹åˆ—è¡¨</p>
                        <div id="schedule_list_container" class="space-y-3"></div>
                        <button onclick="addScheduleItem()" class="mt-2 text-sm font-bold text-brand-gold hover:text-yellow-600">+ æ–°å¢å ´æ¬¡</button>
                    </div>
                `;
                setTimeout(() => { addScheduleItem(); addScheduleItem(); }, 100);
            } else if (mode === 'weekly_standings') {
                html += `
                    ${createInput('week_num', 'ç¬¬å¹¾é€± (Week)', 'number', '7')}
                    ${createTextarea('standings_content', 'æˆ°ç¸¾åˆ†ææ–‡æ¡ˆ', '', 8)}
                    <div class="bg-gray-50 p-4 rounded-lg border border-gray-200 mt-4">
                        <p class="text-sm font-bold mb-2">æœ¬é€±è³½ç¨‹åˆ—è¡¨</p>
                        <div id="standings_schedule_list_container" class="space-y-3"></div>
                        <button onclick="addStandingsGameItem()" class="mt-2 text-sm font-bold text-brand-gold hover:text-yellow-600">+ æ–°å¢é å‘Šå ´æ¬¡</button>
                    </div>
                `;
                 setTimeout(() => { addStandingsGameItem(); }, 100);
            } else if (mode === 'top5') {
                 html += `
                    ${createInput('week_num', 'ç¬¬å¹¾é€± (Week)', 'number', '7')}
                    ${createTextarea('top5_intro', 'å¼•è¨€æ–‡æ¡ˆ', '', 3)}
                    <div class="space-y-3 mt-4">
                        <p class="text-sm font-bold text-gray-500">äº”å¤§å¥½çƒæ’è¡Œ</p>
                        ${[1,2,3,4,5].map(i => `
                            <div class="p-3 border rounded-md bg-gray-50">
                                <span class="font-bold text-gray-700 block mb-1">ç¬¬ ${i} å</span>
                                <div class="grid grid-cols-3 gap-2">
                                    <select id="top${i}_team" class="p-2 border rounded text-sm bg-white col-span-1 focus:ring-brand-gold focus:border-brand-gold">
                                        ${TEAM_KEYS.map(k=>`<option value="${k}">${k}</option>`).join('')}
                                    </select>
                                    <input id="top${i}_num" type="text" placeholder="èƒŒè™Ÿ (21)" class="p-2 border rounded text-sm col-span-1 focus:ring-brand-gold focus:border-brand-gold">
                                    <input id="top${i}_name" type="text" placeholder="çƒå“¡å" class="p-2 border rounded text-sm col-span-1 focus:ring-brand-gold focus:border-brand-gold">
                                </div>
                            </div>
                        `).join('')}
                    </div>
                    ${createInput('vote_link', 'æŠ•ç¥¨é€£çµ', 'text')}
                `;
            } else if (mode === 'potw') {
                html += `
                    ${createInput('player_name', 'çƒå“¡åç¨± (ä¸­æ–‡+è‹±æ–‡)', 'text', 'å¸ƒé‡ŒèŒ²å…‹ Bogdan Bliznyuk')}
                    ${createTeamSelect('player_team', 'æ‰€å±¬éšŠä¼')}
                    
                    <div class="bg-gray-50 p-4 rounded-lg border border-gray-200 mt-2">
                        <p class="text-sm font-bold mb-2">æœ¬é€±æ•¸æ“š (STATS)</p>
                        <div id="stats_list_container" class="space-y-2"></div>
                        <button onclick="addStatItem()" class="mt-2 text-sm font-bold text-brand-gold hover:text-yellow-600">+ æ–°å¢æ•¸æ“š</button>
                    </div>
                    
                    ${createTextarea('player_desc', 'çƒå“¡è¡¨ç¾æè¿°', '', 6)}
                    ${nextGameBlock}
                `;
                setTimeout(() => { addStatItem(); addStatItem(); addStatItem(); }, 100);
            }

            container.innerHTML = html;
        }

        // --- Helper for Weekly Schedule (Optimized for Mobile) ---
        function addScheduleItem() {
            const container = document.getElementById('schedule_list_container');
            const idx = container.children.length;
            const div = document.createElement('div');
            
            // Mobile: Vertical Stack with X centered to the right
            // Desktop: Horizontal Row
            div.className = "flex gap-2 text-sm items-center border-b pb-4 mb-2 md:border-0 md:pb-0 md:mb-0";
            
            const timeOptions = GAME_TIMES.map(t => `<option value="${t}">${t}</option>`).join('');
            
            // Added h-9 to input and selects to ensure equal height on desktop
            div.innerHTML = `
                <div class="flex-1 flex flex-col md:flex-row gap-2">
                    <input type="date" id="sch_date_${idx}" class="w-full md:w-32 p-1 border rounded focus:ring-brand-gold focus:border-brand-gold md:h-9">
                    <div class="flex gap-2 items-center w-full md:w-auto">
                        <select id="sch_time_${idx}" class="w-24 p-1 border rounded bg-white focus:ring-brand-gold focus:border-brand-gold md:h-9">${timeOptions}</select>
                        <select id="sch_away_${idx}" class="flex-1 p-1 border rounded bg-white focus:ring-brand-gold focus:border-brand-gold md:h-9">${TEAM_KEYS.map(k=>`<option value="${k}">${k}</option>`).join('')}</select>
                        <span class="text-center shrink-0">vs</span>
                        <select id="sch_home_${idx}" class="flex-1 p-1 border rounded bg-white focus:ring-brand-gold focus:border-brand-gold md:h-9">${TEAM_KEYS.map(k=>`<option value="${k}">${k}</option>`).join('')}</select>
                    </div>
                </div>
                <button onclick="this.parentElement.remove()" class="text-red-500 font-bold px-2 shrink-0 self-center md:self-auto text-xl md:text-base">&times;</button>
            `;
            container.appendChild(div);
        }

        // --- Helper for Standings Schedule (Optimized for Mobile) ---
        function addStandingsGameItem() {
            const container = document.getElementById('standings_schedule_list_container');
            const idx = container.children.length;
            const div = document.createElement('div');
            div.className = "flex gap-2 text-sm items-center border-b pb-4 mb-2 md:border-0 md:pb-0 md:mb-0";
            
            const timeOptions = GAME_TIMES.map(t => `<option value="${t}">${t}</option>`).join('');
            
            // Added h-9 to input and selects
            div.innerHTML = `
                <div class="flex-1 flex flex-col md:flex-row gap-2">
                    <input type="date" id="std_sch_date_${idx}" class="w-full md:w-32 p-1 border rounded focus:ring-brand-gold focus:border-brand-gold md:h-9">
                    <div class="flex gap-2 items-center w-full md:w-auto">
                        <select id="std_sch_time_${idx}" class="w-24 p-1 border rounded bg-white focus:ring-brand-gold focus:border-brand-gold md:h-9">${timeOptions}</select>
                        <select id="std_sch_away_${idx}" class="flex-1 p-1 border rounded bg-white focus:ring-brand-gold focus:border-brand-gold md:h-9">${TEAM_KEYS.map(k=>`<option value="${k}">${k}</option>`).join('')}</select>
                        <span class="text-center shrink-0">vs</span>
                        <select id="std_sch_home_${idx}" class="flex-1 p-1 border rounded bg-white focus:ring-brand-gold focus:border-brand-gold md:h-9">${TEAM_KEYS.map(k=>`<option value="${k}">${k}</option>`).join('')}</select>
                    </div>
                </div>
                <button onclick="this.parentElement.remove()" class="text-red-500 font-bold px-2 shrink-0 self-center md:self-auto text-xl md:text-base">&times;</button>
            `;
            container.appendChild(div);
        }

        // --- Helper for POTW Stats ---
        function addStatItem() {
            const container = document.getElementById('stats_list_container');
            const idx = container.children.length;
            const div = document.createElement('div');
            div.className = "flex gap-2 items-center";
            
            const typeOptions = STAT_TYPES.map(t => `<option value="${t.val}">${t.label}</option>`).join('');
            
            div.innerHTML = `
                <input type="text" id="stat_val_${idx}" placeholder="æ•¸å€¼ (28)" class="w-20 p-2 border rounded text-sm focus:ring-brand-gold focus:border-brand-gold">
                <select id="stat_type_${idx}" onchange="toggleCustomStat(${idx})" class="w-32 p-2 border rounded text-sm bg-white focus:ring-brand-gold focus:border-brand-gold">
                    ${typeOptions}
                </select>
                <input type="text" id="stat_cust_${idx}" placeholder="è‡ªè¨‚å–®ä½" class="flex-1 p-2 border rounded text-sm hidden focus:ring-brand-gold focus:border-brand-gold">
                <button onclick="this.parentElement.remove()" class="text-red-500 font-bold px-2">&times;</button>
            `;
            container.appendChild(div);
        }

        function toggleCustomStat(idx) {
            const select = document.getElementById(`stat_type_${idx}`);
            const customInput = document.getElementById(`stat_cust_${idx}`);
            if (select.value === 'custom') {
                customInput.classList.remove('hidden');
            } else {
                customInput.classList.add('hidden');
            }
        }

        // --- Generation Logic ---
        function generateCopy() {
            let output = "";
            const getValue = (id) => document.getElementById(id)?.value || "";
            const getTeam = (key) => TEAMS[key];

            // Common helper for Next Game Block
            const getNextGameText = () => {
                const date = getValue('next_date');
                if(!date) return "";
                const mmdd = formatMMDD(date);
                const day = getDayChi(date);
                const time = getValue('next_time');
                const home = getValue('next_home');
                const away = getValue('next_away');
                const arena = TEAMS[home].arena;
                return `ğŸ“Œä¸‹å ´æ¯”è³½ï¼Œä¸€èµ·è¿é¢¨è€Œä¸Šã€‚\nâ–Œ ${mmdd}ï¼ˆ${day}ï¼‰ï½œ${time}ï½œ${TEAMS[away].full}ï¼ˆå®¢ï¼‰ vs. ${TEAMS[home].full}ï¼ˆä¸»ï¼‰ï½œ${arena}`;
            };
            
            const getNextGameTextShort = () => {
                const date = getValue('next_date');
                if(!date) return "";
                const monthDay = formatMonthDay(date); // DEC.03
                const time = getValue('next_time'); // 19:00
                const home = getValue('next_home');
                const away = getValue('next_away');
                const num = getValue('next_game_num');
                return `ğŸ“º NEXT GAME\n${monthDay}ï½œGame${num}ï½œ${time}ï½œ${TEAMS[away].full} ï¼ˆå®¢ï¼‰ vs. ${TEAMS[home].full} ï¼ˆä¸»ï¼‰`;
            }


            if (currentMode === 'game_preview') {
                const date = getValue('match_date');
                const time = getValue('match_time');
                const homeKey = getValue('home_team');
                const awayKey = getValue('away_team');
                const home = TEAMS[homeKey];
                const away = TEAMS[awayKey];
                
                const headerDate = `${toMathBoldSerif(formatMonthDay(date))}ï¼ˆ${toMathBoldSerif(getDayName(date))}ï¼‰`; 
                
                output = `#${toMathBoldSerif('GAMEDAY')}& #${toMathBoldSerif('ROSTER')}ï½œ ${headerDate}\n\n`;
                output += `ä¾‹è¡Œè³½ ${toMathBoldSerif('GAME')} ${getValue('game_num')} âœ¦ ${time} ${away.emoji}${awayKey} vs ${homeKey}${home.emoji}âœ¦\n\n`;
                output += `${getValue('highlight_text')}\n\nâ€”\n\n`;
                output += `ğŸ‘‰ğŸ»è³½äº‹åœ°é»ğŸ“${home.arena}\n${BROADCAST_INFO}\n`;
                output += `ğŸ‘‰ğŸ»YTè½‰æ’­é€£çµï½œ${getValue('yt_link')}\n\n`;
                output += `${COMMON_TAGS} #TPBLä¾‹è¡Œè³½ #moltentaiwan`;

            } else if (currentMode === 'weekday_preview') {
                const date = getValue('match_date');
                const home = TEAMS[getValue('home_team')];
                const away = TEAMS[getValue('away_team')];
                const dayName = getDayName(date); // WED
                const mmdd = formatMMDD(date); // 12.03
                const dayChi = getDayChi(date); // ä¸‰
                const title = getValue('promo_title');
                
                output = `ğŸ€ ${toMathBoldSerif(title)}\n\n`;
                output += `${getValue('promo_text')}\n\n-\n\n`;
                output += `ğŸ“Œ å°é€±æœ«å°±çœ‹ç±ƒçƒï¼š\n`;
                output += `â–Œ ${mmdd}ï¼ˆ${dayChi}ï¼‰ï½œ${getValue('match_time')}ï½œ${away.full}ï¼ˆå®¢ï¼‰ vs. ${home.full}ï¼ˆä¸»ï¼‰ï½œ${home.arena}\n\n-\n\n`;
                if(getValue('promo_link')) output += `${getValue('promo_link')}\n\n`;
                output += COMMON_TAGS;

            } else if (currentMode === 'final_score') {
                output = `ğŸ”™ ${toMathBoldSerif('GAME')} ${getValue('game_num')} FINALï½œ${getValue('match_title')}\n\n`;
                output += `${getValue('match_recap')}\n\n`;
                
                const date = getValue('next_date');
                if(date) {
                    const monthDay = formatMonthDay(date);
                    const home = TEAMS[getValue('next_home')];
                    const away = TEAMS[getValue('next_away')];
                    output += `ğŸ“ºNEXT GAME\n${monthDay}ï½œ${getValue('next_time')}ï½œ${away.full}ï¼ˆå®¢ï¼‰ vs. ${home.full}ï¼ˆä¸»ï¼‰`;
                }
                output += `\n\n${COMMON_TAGS} #TPBLä¾‹è¡Œè³½`;

            } else if (currentMode === 'game_highlight') {
                output = `${getValue('hl_title')}\n\n`;
                output += `ğŸ“º ç·¯ä¾†é«”è‚²å°ï½œåšæ–¯é‹å‹•äºŒå°ï½œTPBLå®˜æ–¹YOUTUBE\nğŸ‘‰ğŸ»YTè½‰æ’­é€£çµï½œ${getValue('yt_link')}\n\n`;
                output += `${COMMON_TAGS} #TPBLä¾‹è¡Œè³½`;

            } else if (currentMode === 'press_conf') {
                output = `ğŸ—£ï¸ ${toMathBoldSerif(getValue('pc_title'))}\n\n`;
                output += `ğŸ’¬ã€Œ${getValue('pc_quote')}ã€\n\n`;
                output += `${getValue('pc_content')}\n\n`;
                output += getNextGameText();
                output += `\n\n${COMMON_TAGS}`;

            } else if (currentMode === 'potg') {
                const home = TEAMS[getValue('potg_home')];
                const away = TEAMS[getValue('potg_away')];
                output = `â¤ï¸ ${toMathBoldSerif('NOTHING BUT HIM')}\n\n`;
                output += `${away.emoji} / ${home.emoji} #${toMathBoldSerif('å–®å ´æœ€ä½³çƒå“¡')}\n\n`;
                output += getNextGameTextShort();
                output += `\n\n-\n\n${getValue('promo_text')}\n\n${COMMON_TAGS} #TPBLä¾‹è¡Œè³½`;

            } else if (currentMode === 'weekly_schedule') {
                output = `â°ï½œ${toMathBoldSerif('WEEK')} ${toMathBoldSerif(getValue('week_num'))} ${toMathBoldSerif('SCHEDULE')} #æ¯é€±è³½ç¨‹\n\n`;
                output += `${getValue('week_intro')}\n\n-\n\nğŸ“Œ æœ¬é€±è³½äº‹é å‘Šï¼š\n`;
                
                const listContainer = document.getElementById('schedule_list_container');
                Array.from(listContainer.children).forEach(div => {
                    const inputs = div.querySelectorAll('input, select');
                    const d = inputs[0].value;
                    const t = inputs[1].value;
                    const a = TEAMS[inputs[2].value];
                    const h = TEAMS[inputs[3].value];
                    if(d) {
                         const mmdd = formatMMDD(d);
                         const day = getDayChi(d);
                         output += `â–Œ ${mmdd}ï¼ˆ${day}ï¼‰ï½œ${t}ï½œ${a.full}ï¼ˆå®¢ï¼‰ vs. ${h.full}ï¼ˆä¸»ï¼‰ï½œ${h.arena}\n`;
                    }
                });
                output += `\n${COMMON_TAGS}`;

            } else if (currentMode === 'weekly_standings') {
                output = `ğŸ“Šï½œ${toMathBoldSerif('WEEK')} ${getValue('week_num')} #çƒéšŠæˆ°ç¸¾æ’è¡Œ\n\n`;
                output += `${getValue('standings_content')}\n\n`;
                
                const listContainer = document.getElementById('standings_schedule_list_container');
                const hasChildren = listContainer && listContainer.children.length > 0;
                
                if (hasChildren) {
                    output += `ğŸ“Œ æœ¬é€±è³½äº‹é å‘Šï¼š\n`;
                    Array.from(listContainer.children).forEach(div => {
                        const inputs = div.querySelectorAll('input, select');
                        const d = inputs[0].value;
                        const t = inputs[1].value;
                        const a = inputs[2].value;
                        const h = inputs[3].value;
                        if(d) {
                             const mmdd = formatMMDD(d);
                             const day = getDayChi(d);
                             const aTeam = TEAMS[a];
                             const hTeam = TEAMS[h];
                             output += `â–Œ ${mmdd}ï¼ˆ${day}ï¼‰ï½œ${t}ï½œ${aTeam.full}ï¼ˆå®¢ï¼‰ vs. ${hTeam.full}ï¼ˆä¸»ï¼‰ï½œ${hTeam.arena}\n`;
                        }
                    });
                     output += `\n${COMMON_TAGS}`;
                } else {
                    output += `\n${COMMON_TAGS}`;
                }

            } else if (currentMode === 'top5') {
                output = `ğŸ’£ï½œ${toMathBoldSerif('TOP')}ğŸ“ âœ¦ ${toMathBoldSerif('Week')} ${getValue('week_num')} ğŸ“¢\n\n`;
                output += `${getValue('top5_intro')}\n\n`;
                
                for (let i = 5; i >= 1; i--) {
                    const teamKey = document.getElementById(`top${i}_team`)?.value;
                    const num = document.getElementById(`top${i}_num`)?.value;
                    const name = document.getElementById(`top${i}_name`)?.value;
                    
                    if (name) { 
                        const team = TEAMS[teamKey];
                        const circledNum = ['â‘ ', 'â‘¡', 'â‘¢', 'â‘£', 'â‘¤'][i-1];
                        output += `${circledNum} ${team.emoji}${team.full} | #${num} ${name}\n`;
                    }
                }

                output += `\n${getValue('vote_link')}\n\n${COMMON_TAGS}`;

            } else if (currentMode === 'potw') {
                const team = TEAMS[getValue('player_team')];
                output = `ğŸ¥‡ ${toMathBoldSerif('PLAYER OF THE WEEK')} | #å–®é€±è¡¨ç¾æœ€ä½³çƒå“¡\n\n`;
                output += `ğŸ«¶ğŸ» ${toMathBoldSerif('NOTHING BUT')} ${team.emoji} ${getValue('player_name')}\n\n`;
                
                const statContainer = document.getElementById('stats_list_container');
                let statsArr = [];
                Array.from(statContainer.children).forEach(div => {
                    const val = div.querySelector('input[type="text"]').value;
                    const select = div.querySelector('select');
                    let unit = select.value;
                    
                    if (unit === 'custom') {
                        unit = div.querySelectorAll('input[type="text"]')[1].value;
                    }
                    
                    if (val) {
                        statsArr.push(`${val} ${unit}`);
                    }
                });
                
                output += `${toMathBoldSerif('STATS')} | ${statsArr.join(' / ')}\n\n`;
                output += `${getValue('player_desc')}\n\n-\n\n`;
                
                const date = getValue('next_date');
                if(date) {
                    const mmdd = formatMMDD(date);
                    const day = getDayChi(date);
                    const home = TEAMS[getValue('next_home')];
                    const away = TEAMS[getValue('next_away')];
                    const time = getValue('next_time');
                    const nameOnly = getValue('player_name').split(' ')[0] || "";
                    
                    output += `ğŸ“Œä¼‘æ¯ä¸€ä¸‹å›ä¾†çœ‹${nameOnly}ç™¼å¨ğŸ‘€\n`;
                    output += `â–Œ ${mmdd}ï¼ˆ${day}ï¼‰ï½œ${time}ï½œ${away.full}ï¼ˆå®¢ï¼‰ vs. ${home.full}ï¼ˆä¸»ï¼‰ï½œ${home.arena}`;
                }
                output += `\n\n${COMMON_TAGS}`;
            }

            document.getElementById('output-text').value = output;
        }

        // --- Utils ---
        function copyToClipboard() {
            const copyText = document.getElementById("output-text");
            copyText.select();
            document.execCommand("copy");
            
            const btn = document.getElementById("copy-text");
            const original = btn.innerText;
            btn.innerText = "å·²è¤‡è£½ï¼";
            setTimeout(() => btn.innerText = original, 2000);
        }

        // Initialize
        switchMode('game_preview');
    </script>
</body>
</html>
